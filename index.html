<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ì‹¬í™” íƒêµ¬ ê³¼ì • í†µí•© ì›Œí¬ë¶ (ì™„ì „íŒ)</title>

  <!-- í•„ìˆ˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700;900&display=swap');
    * { box-sizing: border-box; }
    body {
      font-family: 'Noto Sans KR', sans-serif;
      background-color: #f8fafc;
      color: #0f172a;
      word-break: keep-all;
    }
    .scrollbar-hide::-webkit-scrollbar { display: none; }

    #loading-screen {
      position: fixed; inset: 0; background: #0f172a; color: white;
      display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 9999;
      transition: opacity 0.5s ease;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    .fade-in { animation: fadeIn 0.4s ease-out; }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @media print {
      @page {
        size: A4;
        margin: 14mm 14mm 14mm 14mm;
      }

      .no-print { display: none !important; }
      .print-only { display: block !important; }

      html, body {
        background: #fff !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
        font-family: "Noto Sans KR", system-ui, -apple-system, Segoe UI, Roboto, sans-serif !important;
        color: #111827 !important;
      }

      .print-root { width: 100%; }

      .print-page {
        page-break-after: always;
        break-after: page;
        padding: 0;
      }
      .print-page:last-child {
        page-break-after: auto;
        break-after: auto;
      }

      .avoid-break,
      .print-card,
      .print-block {
        break-inside: avoid;
        page-break-inside: avoid;
      }

      .shadow-xl, .shadow-2xl, .shadow-lg, .shadow-sm { box-shadow: none !important; }
      .border-double { border-style: solid !important; }

      .print-title { font-size: 26pt !important; line-height: 1.15 !important; font-weight: 900 !important; }
      .print-subtitle { font-size: 12pt !important; letter-spacing: 0.08em !important; color: #6b7280 !important; }
      .print-h2 { font-size: 16pt !important; font-weight: 900 !important; margin: 0 0 10mm 0 !important; }
      .print-label { font-size: 9pt !important; font-weight: 800 !important; letter-spacing: 0.12em !important; color: #6b7280 !important; text-transform: uppercase; }
      .print-body { font-size: 11pt !important; line-height: 1.55 !important; }
      .print-small { font-size: 9.5pt !important; line-height: 1.5 !important; color: #374151 !important; }

      ul, ol { margin: 0; padding-left: 18px; }
      li { margin: 2mm 0; }
    }
    .print-only { display: none; }

    .btn-ai-glow {
      background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
      transition: all 0.3s ease;
    }
    .btn-ai-glow:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px -5px rgba(79, 70, 229, 0.5);
    }
  </style>
</head>

<body>
  <div id="loading-screen">
    <div style="width:40px;height:40px;border:4px solid #6366f1;border-top-color:transparent;border-radius:50%;animation:spin 1s linear infinite;margin-bottom:20px;"></div>
    <p style="font-weight:900;letter-spacing:2px;">SYSTEM LOADING...</p>
    <p style="font-size:12px;color:#94a3b8;margin-top:6px;">ì ì‹œë§Œ ê¸°ë‹¤ë ¤ ì£¼ì„¸ìš”.</p>
  </div>

  <div id="root"></div>

  <script type="text/babel">
    /****************************************************************
     * 0) í™˜ê²½/ê¸°ë³¸ ìƒìˆ˜
     ****************************************************************/
    const { useState, useEffect } = React;

    // TODO: ë³¸ì¸ Apps Script ë°°í¬ URLë¡œ êµì²´í•˜ì„¸ìš”.
    const CONFIG = {
      SCRIPT_URL: "https://script.google.com/macros/s/AKfycbwU0llzFeQJW29LyStZRU9ohrveZq6sH_xVaF9IgV4Iwd1p8aqBiRjNJCuBNEJEOPcI/exec",
      GEMINI_MODEL: "gemini-1.5-pro" // ì„œë²„ì—ì„œ ì‚¬ìš© ì¤‘ì¸ ëª¨ë¸ëª…ì— ë§ì¶° ì¡°ì •
    };

    const EMPTY_STUDENT = {
      school: "",
      gradeClass: "",
      name: "",
      major: ""
    };

    const EMPTY_SESSION = {
      s1_topic: "",
      s1_motive: "",
      s1_question: "",
      s1_connection: "",

      s2_book: "",
      s2_author: "",
      s2_level: "ì „ê³µ ê¸°ì´ˆ(ê°œë¡ )",
      s2_part: "",
      s2_goal: "í•™ìˆ  ë³´ê³ ì„œ",

      s3_depth: "",
      s3_trace: "",

      s4_keyword: "",
      s4_fact: "",

      s5_log: "",
      s5_error: "",
      s5_result: "",

      s8_claim: "",
      s8_growth: "",
      s8_next: "",
      s8_summary: ""
    };

    const TAB_ITEMS = [
      { id: 0,  label: "ì •ë³´ ì…ë ¥" },
      { id: 1,  label: "1ì°¨ì‹œ" },
      { id: 2,  label: "2ì°¨ì‹œ" },
      { id: 3,  label: "3ì°¨ì‹œ" },
      { id: 4,  label: "4ì°¨ì‹œ" },
      { id: 5,  label: "5~7ì°¨ì‹œ" },
      { id: 8,  label: "8~10ì°¨ì‹œ" },
      { id: 11, label: "íƒêµ¬ ì£¼ì œ ì°¾ê¸°" },
      { id: 14, label: "ì°¸ì¡°ì‚¬ì´íŠ¸" },
      { id: 12, label: "AI ì‚¬ìš© ìˆ˜ì¹™" },
      { id: 13, label: "íƒêµ¬ ë°©ë²• ê°€ì´ë“œ" },
    ];

    /****************************************************************
     * 1) ê³µìš© UI ì»´í¬ë„ŒíŠ¸
     ****************************************************************/
    const Label = ({ children }) => (
      <div className="text-xs font-black uppercase tracking-[0.22em] text-slate-400">
        {children}
      </div>
    );

    const InputField = ({ label, name, value, onChange, placeholder }) => (
      <div className="space-y-4">
        <Label>{label}</Label>
        <input
          name={name}
          value={value}
          onChange={onChange}
          placeholder={placeholder}
          className="w-full p-6 rounded-3xl bg-slate-50 font-black text-lg outline-none focus:ring-4 focus:ring-indigo-100 border border-slate-100"
        />
      </div>
    );

    const TextAreaField = ({
      label,
      name,
      value,
      onChange,
      placeholder,
      height = "h-40",
      bgColor = "bg-slate-50",
      textColor = "text-slate-900"
    }) => (
      <div className="space-y-4">
        <Label>{label}</Label>
        <textarea
          name={name}
          value={value}
          onChange={onChange}
          placeholder={placeholder}
          className={`w-full ${height} ${bgColor} ${textColor} p-6 rounded-3xl font-bold text-base outline-none focus:ring-4 focus:ring-indigo-100 border border-slate-100 resize-none scrollbar-hide`}
        />
      </div>
    );

    const AiResultBox = ({ loading, result, onClose }) => {
      if (!loading && !result) return null;
      return (
        <div className="mb-8 bg-slate-900 text-white rounded-[40px] border border-white/10 shadow-2xl p-8 relative overflow-hidden">
          <div className="absolute top-0 right-0 p-8 opacity-10">
            <i data-lucide="sparkles" className="w-20 h-20"></i>
          </div>

          <div className="flex items-start justify-between gap-6">
            <div>
              <div className="text-[10px] font-black uppercase tracking-[0.3em] text-slate-400">
                AI Coach Output
              </div>
              <div className="text-lg font-black mt-2">
                {loading ? "ìƒì„± ì¤‘ì…ë‹ˆë‹¤..." : "ê²°ê³¼ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤."}
              </div>
            </div>

            <button
              type="button"
              onClick={onClose}
              className="bg-white/10 hover:bg-white/15 px-4 py-2 rounded-2xl font-black text-xs border border-white/10"
            >
              ë‹«ê¸°
            </button>
          </div>

          <div className="mt-6 whitespace-pre-wrap text-sm leading-relaxed font-bold text-slate-100">
            {loading ? "ì ì‹œë§Œ ê¸°ë‹¤ë ¤ ì£¼ì„¸ìš”." : result}
          </div>
        </div>
      );
    };

    const Header = ({ serverStatus, handleSaveAll, handleLogout }) => (
      <header className="px-4 md:px-10 py-6 bg-white border-b border-slate-200 sticky top-0 z-40">
        <div className="max-w-6xl mx-auto flex items-center justify-between gap-6 flex-wrap">
          <div className="flex items-center gap-4">
            <div className="bg-slate-900 text-white rounded-3xl px-5 py-3 shadow-lg">
              <div className="text-[10px] font-black uppercase tracking-[0.32em] text-slate-400">Workbook</div>
              <div className="text-sm font-black mt-1">ì‹¬í™” íƒêµ¬ ê³¼ì • í†µí•© ì›Œí¬ë¶</div>
            </div>

            <div className="text-xs font-black text-slate-500">
              {serverStatus || "ìƒíƒœ: ì¤€ë¹„ë¨"}
            </div>
          </div>

          <div className="flex items-center gap-3">
            <button
              type="button"
              onClick={handleSaveAll}
              className="btn-ai-glow text-white px-6 py-3 rounded-3xl text-xs font-black shadow-xl active:scale-95 flex items-center gap-2"
            >
              <i data-lucide="save" className="w-4 h-4 text-amber-300"></i>
              ì „ì²´ ì €ì¥
            </button>

            <button
              type="button"
              onClick={handleLogout}
              className="bg-slate-100 hover:bg-slate-200 text-slate-900 px-6 py-3 rounded-3xl text-xs font-black shadow-sm active:scale-95"
            >
              ë¡œê·¸ì•„ì›ƒ
            </button>
          </div>
        </div>
      </header>
    );

    const TabNavigation = ({ activeTab, setActiveTab, setAiResult }) => (
      <nav className="px-4 md:px-10 py-5 bg-slate-50 border-b border-slate-200">
        <div className="max-w-6xl mx-auto flex gap-2 overflow-x-auto scrollbar-hide">
          {TAB_ITEMS.map((t) => {
            const isOn = activeTab === t.id;
            return (
              <button
                key={t.id}
                type="button"
                onClick={() => { setAiResult(""); setActiveTab(t.id); }}
                className={
                  "px-5 py-3 rounded-3xl text-xs font-black border transition-all shrink-0 " +
                  (isOn
                    ? "bg-slate-900 text-white border-slate-900 shadow-lg"
                    : "bg-white text-slate-600 border-slate-200 hover:border-indigo-200 hover:text-slate-900")
                }
              >
                {t.label}
              </button>
            );
          })}
        </div>
      </nav>
    );

    const LoginScreen = ({ personalCode, setPersonalCode, handleLogin, serverStatus }) => (
      <div className="fixed inset-0 bg-slate-900/95 flex items-center justify-center z-50">
        <div className="w-full max-w-xl p-8 md:p-12">
          <div className="bg-white rounded-[56px] p-10 md:p-14 shadow-2xl border border-white/10">
            <div className="flex items-center justify-between flex-wrap gap-4 mb-10">
              <div>
                <div className="text-[10px] font-black uppercase tracking-[0.32em] text-slate-400">Access</div>
                <div className="text-3xl font-black text-slate-900 tracking-tighter mt-2">ê°œì¸ ì½”ë“œ ë¡œê·¸ì¸</div>
                <div className="text-xs font-bold text-slate-500 mt-2">ì½”ë“œ ê¸°ë°˜ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ê³  ì €ì¥í•©ë‹ˆë‹¤.</div>
              </div>
              <div className="bg-slate-900 text-white rounded-[28px] px-6 py-4 shadow-xl border border-white/5">
                <div className="text-[10px] font-black uppercase tracking-[0.3em] text-slate-400">Status</div>
                <div className="text-xs font-black mt-1">{serverStatus || "ëŒ€ê¸° ì¤‘"}</div>
              </div>
            </div>

            <div className="space-y-4">
              <Label>Personal Code</Label>
              <input
                value={personalCode}
                onChange={(e) => setPersonalCode(e.target.value)}
                placeholder="ì˜ˆ: ABCD-1234"
                className="w-full p-6 rounded-3xl bg-slate-50 font-black text-lg outline-none focus:ring-4 focus:ring-indigo-100 border border-slate-100"
              />
              <button
                type="button"
                onClick={handleLogin}
                className="btn-ai-glow w-full text-white px-8 py-5 rounded-3xl text-sm font-black shadow-2xl active:scale-95 flex items-center justify-center gap-2"
              >
                <i data-lucide="log-in" className="w-5 h-5 text-amber-300"></i>
                ë¡œê·¸ì¸
              </button>
              <div className="text-[11px] text-slate-500 font-bold mt-2">
                â€» ì„œë²„ URL/ê¶Œí•œ ì„¤ì •ì´ ì˜¬ë°”ë¥´ì§€ ì•Šìœ¼ë©´ ë¡œë“œ/ì €ì¥ì´ ì‹¤íŒ¨í•©ë‹ˆë‹¤.
              </div>
            </div>
          </div>
        </div>
      </div>
    );

    /****************************************************************
     * 2) (A) ë°ì´í„°: 4ëŒ€ ì „ëµ ëª¨ë“ˆ
     ****************************************************************/
    const STRATEGY_DATA = {
      papers: {
        key: "papers",
        color: "blue",
        label: "í•™ìˆ ì  ì ‘ê·¼",
        titleCard: "1. ë…¼ë¬¸/í•™ìˆ ì§€",
        descCard: "RISS, DBpiaì—ì„œ ê²€ì¦ëœ ì—°êµ¬ ë³€í˜•í•˜ê¸°",
        title: "ë…¼ë¬¸ í”Œë«í¼ë³„ ê²€ìƒ‰ ì „ëµ",
        subTabs: ["dbpia", "riss", "google"],
        content: {
          dbpia: {
            name: "DBpia (ë””ë¹„í”¼ì•„)",
            badge: "êµ­ë‚´ ë…¼ë¬¸",
            steps: [
              { title: "1. ì£¼ì œë¶„ë¥˜ íƒ­ í™œìš©", desc: "ë©”ì¸ ìƒë‹¨ [ì£¼ì œë¶„ë¥˜] í´ë¦­ â†’ ê´€ì‹¬ ê³„ì—´(ì‚¬íšŒê³¼í•™, ê³µí•™ ë“±) ì„ íƒí•©ë‹ˆë‹¤." },
              { title: "2. ì´ìš©ìˆ˜ + 1ë…„ í•„í„°ë§", desc: "ê²€ìƒ‰ í•„í„°ì—ì„œ ì •ë ¬ ê¸°ì¤€ì„ [ì´ìš©ìˆ˜], ê¸°ê°„ì„ [ìµœê·¼ 1ë…„]ìœ¼ë¡œ ì„¤ì •í•´ íŠ¸ë Œë“œë¥¼ íŒŒì•…í•©ë‹ˆë‹¤." },
              { title: "3. Top 10 í›‘ì–´ë³´ê¸°", desc: "ê°€ì¥ ë§ì´ ì½íŒ ë…¼ë¬¸ 10ê°œì˜ ì œëª©ì„ ë³´ê³  í•µì‹¬ í‚¤ì›Œë“œë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤." },
              { title: "4. ë³€í˜•í•˜ì—¬ ì ìš©", desc: "ëŒ€ìƒ(ëŒ€í•™ìƒâ†’ê³ ë“±í•™ìƒ), ì§€ì—­(ì„œìš¸â†’ìš°ë¦¬ë™ë„¤) ë“± í•œ ìš”ì†Œë§Œ ë°”ê¿” ë‚´ ì£¼ì œë¡œ ë³€í˜•í•©ë‹ˆë‹¤." },
            ],
          },
          riss: {
            name: "RISS (í•™ìœ„ë…¼ë¬¸)",
            badge: "ë°©ë²•ë¡  ë²¤ì¹˜ë§ˆí‚¹",
            steps: [
              { title: "1. í•™ìœ„ë…¼ë¬¸ íƒ­ í´ë¦­", desc: "í‚¤ì›Œë“œ ê²€ìƒ‰ í›„ [í•™ìœ„ë…¼ë¬¸] íƒ­ì„ ì„ íƒí•©ë‹ˆë‹¤. ì„/ë°•ì‚¬ ë…¼ë¬¸ì€ ì—°êµ¬ ê³¼ì •ì´ ìƒì„¸í•´ ë”°ë¼í•˜ê¸° ì¢‹ìŠµë‹ˆë‹¤." },
              { title: "2. êµ­ë‚´ì„ì‚¬ í•„í„°", desc: "ë‚œì´ë„ê°€ ë†’ì€ ë°•ì‚¬/í•´ì™¸ ë…¼ë¬¸ë³´ë‹¤ [êµ­ë‚´ ì„ì‚¬] ë…¼ë¬¸ì„ ìš°ì„  íƒìƒ‰í•©ë‹ˆë‹¤." },
              { title: "3. ëª©ì°¨ í™•ì¸", desc: "ëª©ì°¨ë¥¼ ë³´ê³  ì„¤ë¬¸ ë¬¸í•­/ì‹¤í—˜ ì„¤ê³„ê°€ ìˆ˜í–‰ ê°€ëŠ¥í•œ ìˆ˜ì¤€ì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤." },
              { title: "4. ì œì–¸ ì°¾ê¸°", desc: "ê²°ë¡ ì˜ [ì œì–¸]ì—ì„œ ì—°êµ¬ìê°€ ë‚¨ê¸´ í›„ì† ê³¼ì œë¥¼ ë‚´ íƒêµ¬ë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤." },
            ],
          },
          google: {
            name: "Google Scholar",
            badge: "ì‹¬í™”/í™•ì¥",
            steps: [
              { title: "1. 2024ë…„ ì´í›„ ì„¤ì •", desc: "ì¢Œì¸¡ ì‚¬ì´ë“œë°”ì—ì„œ [2024ë…„ ì´í›„]ë¡œ ì œí•œí•´ ìµœì‹  íŠ¸ë Œë“œë¥¼ íŒŒì•…í•©ë‹ˆë‹¤." },
              { title: "2. ì¸ìš© ì¶”ì ", desc: "[00íšŒ ì¸ìš©ë¨]ì„ í´ë¦­í•´ ë” ìµœì‹ /ì‹¬í™”ëœ í›„ì† ì—°êµ¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤." },
              { title: "3. Related Articles", desc: "ê´€ì‹¬ ë…¼ë¬¸ í•˜ë‹¨ì˜ [ê´€ë ¨ í•™ìˆ ìë£Œ] ë²„íŠ¼ì„ ëˆŒëŸ¬ ìœ ì‚¬ ì£¼ì œ ë…¼ë¬¸ ë¬¶ìŒì„ í™•ì¸í•©ë‹ˆë‹¤." },
              { title: "4. Review ë…¼ë¬¸ ê²€ìƒ‰", desc: "ê²€ìƒ‰ì–´ + â€œreviewâ€ë¡œ ë¶„ì•¼ ì „ì²´ íë¦„ì„ ìš”ì•½í•œ ë…¼ë¬¸ì„ ì°¾ìŠµë‹ˆë‹¤." },
            ],
          },
        },
        caseStudy: {
          before: "RISS ì„ì‚¬ ë…¼ë¬¸: â€˜ìˆ˜ë©´ ì‹œê°„ì´ ê³ ë“±í•™ìƒì˜ í•™ìŠµ ëª°ì…ë„ì— ë¯¸ì¹˜ëŠ” ì˜í–¥â€™",
          after: "ë‚˜ì˜ íƒêµ¬: â€˜ì‹œí—˜ ê¸°ê°„ ê³ ì¹´í˜ì¸ ìŒë£Œ ì„­ì·¨ëŸ‰ì´ ìˆ˜ë©´ì˜ ì§ˆê³¼ 1êµì‹œ ì§‘ì¤‘ë ¥ì— ë¯¸ì¹˜ëŠ” ìƒê´€ê´€ê³„â€™",
          points: [
            "ë³€ìˆ˜ êµ¬ì²´í™”: ìˆ˜ë©´ ì‹œê°„ â†’ ì¹´í˜ì¸ ì„­ì·¨",
            "ìƒí™© êµ¬ì²´í™”: í‰ì†Œ â†’ ì‹œí—˜ ê¸°ê°„",
            "ì¸¡ì • ê°€ëŠ¥ì„±: ì§‘ì¤‘ë ¥ â†’ ìê°€ì§„ë‹¨í‘œ/ì¡°ëŠ” íšŸìˆ˜",
          ],
        },
      },

      books: {
        key: "books",
        color: "amber",
        label: "ë„ì„œ",
        titleCard: "2. ë„ì„œ/ë…ì„œ",
        descCard: "êµê³¼ ê°œë…ê³¼ ì‹¬í™” ë„ì„œ ì—°ê²°í•˜ê¸°",
        title: "ë„ì„œ ì‹¬í™” íƒêµ¬ ì „ëµ",
        subTabs: ["selection", "reading"],
        content: {
          selection: {
            name: "1. ì‹¤íŒ¨ ì—†ëŠ” ì±… ê³ ë¥´ê¸°",
            badge: "ì„ ì • ê¿€íŒ",
            steps: [
              { title: "1. êµê³¼ì„œ ì£¼ì„ í•´í‚¹", desc: "êµê³¼ì„œ â€˜ë” ì½ì–´ë³´ê¸°â€™/ê°ì£¼ì— ì–¸ê¸‰ëœ ì±…ì„ ìš°ì„  ê²€í† í•©ë‹ˆë‹¤." },
              { title: "2. ëŒ€í•™/í•™ê³¼ ì¶”ì²œë„ì„œ", desc: "í¬ë§ ëŒ€í•™ í•™ê³¼ì˜ ê¶Œì¥ ë„ì„œ ëª©ë¡ í‚¤ì›Œë“œë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤." },
              { title: "3. ì„œë¬¸ 3ë¶„ ì»·", desc: "ë„ì„œì˜ ì„œë¬¸ì„ ì½ê³  ì§‘í•„ ì˜ë„ê°€ í¥ë¯¸ë¡­ì§€ ì•Šìœ¼ë©´ ê³¼ê°íˆ êµì²´í•©ë‹ˆë‹¤." },
              { title: "4. ê³¼í•™ ì»¤ë®¤ë‹ˆì¼€ì´í„°", desc: "ì „ê³µì„œê°€ ì–´ë µë‹¤ë©´ í•´ë‹¹ ë¶„ì•¼ ì „ë¬¸ ê¸°ì/ì»¤ë®¤ë‹ˆì¼€ì´í„°ì˜ ëŒ€ì¤‘ì„œë¥¼ ë¨¼ì € ì½ìŠµë‹ˆë‹¤." },
            ],
          },
          reading: {
            name: "2. ì‹œê°„ ì ˆì•½ ë°œì·Œë…",
            badge: "ì½ê¸° ê¸°ìˆ ",
            steps: [
              { title: "1. ìƒ‰ì¸(Index) í™œìš©", desc: "ì±… ë’¤ â€˜ìƒ‰ì¸â€™ì—ì„œ í‚¤ì›Œë“œë¥¼ ì°¾ì•„ í•´ë‹¹ í˜ì´ì§€ë§Œ ì§‘ì¤‘ì ìœ¼ë¡œ ì½ìŠµë‹ˆë‹¤." },
              { title: "2. ì±•í„° ì„œë¡ /ê²°ë¡  í™œìš©", desc: "ì±•í„° ì²« ë¬¸ë‹¨(ë¬¸ì œ ì œê¸°)Â·ë§ˆì§€ë§‰ ë¬¸ë‹¨(ê²°ë¡ )ì„ ìš°ì„  í™•ì¸í•˜ê³  í•„ìš” ì‹œ í™•ì¥í•˜ì—¬ ì½ìŠµë‹ˆë‹¤." },
              { title: "3. ëª©ì°¨ ë§ˆì¸ë“œë§µ", desc: "ëª©ì°¨ë¡œ ë…¼ë¦¬ êµ¬ì¡°ë¥¼ ë¨¼ì € ê·¸ë¦¬ê³ , ë‚´ ì£¼ì œì— í•„ìš”í•œ ë¶€ë¶„ì„ ê³¨ë¼ ì½ìŠµë‹ˆë‹¤." },
              { title: "4. ì°¸ê³ ë¬¸í—Œ ê¼¬ë¦¬ ë¬¼ê¸°", desc: "ì°¸ê³ ë¬¸í—Œì˜ ë…¼ë¬¸ì„ ì‹¤ì œë¡œ ì°¾ì•„ ì½ìœ¼ë©´ ì‹¬í™” ì—­ëŸ‰ ì–´í•„ì— íš¨ê³¼ì ì…ë‹ˆë‹¤." },
            ],
          },
        },
        caseStudy: {
          before: "í†µí•©ì‚¬íšŒ ìˆ˜ì—… ì¤‘ â€˜ì  íŠ¸ë¦¬í”¼ì¼€ì´ì…˜â€™ ê°œë… í•™ìŠµ",
          after: "ë„ì„œ â€˜ê³¨ëª©ì˜ ì „ìŸâ€™ ë°œì·Œë… í›„, ìš°ë¦¬ ë™ë„¤ ìƒê¶Œì˜ ì„ëŒ€ë£Œ ìƒìŠ¹ê³¼ í”„ëœì°¨ì´ì¦ˆ ë¹„ìœ¨ ë³€í™” ì¡°ì‚¬",
          points: [
            "êµê³¼ ê°œë… ì‹¬í™”",
            "ìƒ‰ì¸ì„ í†µí•œ í‚¤ì›Œë“œ ì¤‘ì‹¬ ë…ì„œ",
            "ì´ë¡ ì„ í˜„ì‹¤(ìš°ë¦¬ ë™ë„¤)ì— ì ìš©",
          ],
        },
      },

      news: {
        key: "news",
        color: "emerald",
        label: "ë‰´ìŠ¤/ë¯¸ë””ì–´",
        titleCard: "3. ë‰´ìŠ¤/ë¯¸ë””ì–´",
        descCard: "ë¹…ì¹´ì¸ì¦ˆ, ê³¼í•™ì¡ì§€ íŠ¸ë Œë“œ ë¶„ì„",
        title: "ë‰´ìŠ¤/ë¯¸ë””ì–´ í™œìš© ì „ëµ",
        subTabs: ["sources", "topicizing"],
        content: {
          sources: {
            name: "1. ì–´ë””ì„œ ì°¾ì„ê¹Œ?",
            badge: "ì ‘ì† ê²½ë¡œ",
            steps: [
              { title: "ë¹…ì¹´ì¸ì¦ˆ (BigKinds)", desc: "í•œêµ­ì–¸ë¡ ì§„í¥ì¬ë‹¨ì´ ìš´ì˜í•˜ëŠ” ë‰´ìŠ¤ ë¹…ë°ì´í„° ë¶„ì„ ì‚¬ì´íŠ¸ì…ë‹ˆë‹¤. í‚¤ì›Œë“œ ê´€ê³„ë„ë¥¼ í™•ì¸í•´ ì£¼ì œ í™•ì¥ì— í™œìš©í•©ë‹ˆë‹¤." },
              { title: "ì‚¬ì´ì–¸ìŠ¤íƒ€ì„ì¦ˆ / ë™ì•„ì‚¬ì´ì–¸ìŠ¤", desc: "ì „ë¬¸ ê³¼í•™/ê³µí•™ ì´ìŠˆë¡œ ìµœì‹  ê¸°ìˆ  ë™í–¥ì„ íŒŒì•…í•©ë‹ˆë‹¤." },
              { title: "êµ­íšŒë„ì„œê´€ [í˜„ì•ˆê³¼ ê³¼ì œ]", desc: "ì‚¬íšŒ/ì •ì±… ì´ìŠˆë¥¼ ë‹¤ë£¹ë‹ˆë‹¤. ì „ë¬¸ê°€ë“¤ì´ í˜„ì¬ ì´ìŠˆë¥¼ 4ìª½ ë‚´ì™¸ë¡œ ìš”ì•½í•œ ë³´ê³ ì„œë¥¼ ì œê³µí•©ë‹ˆë‹¤." },
              { title: "TED Talks / ì„¸ë°”ì‹œ", desc: "ì˜ìƒ ë§¤ì²´. ìµœì‹  ì•„ì´ë””ì–´ë¥¼ 15ë¶„ ë‚´ì™¸ë¡œ ì ‘í•  ìˆ˜ ìˆì–´ ë™ê¸° ìœ ë°œì— ì¢‹ìŠµë‹ˆë‹¤." },
            ],
          },
          topicizing: {
            name: "2. ì£¼ì œë¡œ ë§Œë“¤ê¸°",
            badge: "ì—°ê²° ê¸°ìˆ ",
            steps: [
              { title: "1. í—¤ë“œë¼ì¸ ì„œí•‘", desc: "â€˜ë…¼ë€/ìœ„ê¸°/ê¸‰ì¦/ì‹ ê¸°ìˆ â€™ í‚¤ì›Œë“œë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ê¸°ì‚¬ í›„ë³´ë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤." },
              { title: "2. Global to Local", desc: "ì „ ì§€êµ¬ì  ë¬¸ì œ(ê¸°í›„ë³€í™”)ë¥¼ ìš°ë¦¬ ì§€ì—­(í•™êµ ê¸‰ì‹ì‹¤ íƒ„ì†Œë°œìêµ­) ë¬¸ì œë¡œ ì¶•ì†Œí•©ë‹ˆë‹¤." },
              { title: "3. íŒ©íŠ¸ ì²´í¬ & ë°˜ë¡ ", desc: "ê¸°ì‚¬ì˜ ì£¼ì¥ì´ ë§ëŠ”ì§€ ë°ì´í„°ë¥¼ ì°¾ì•„ ê²€ì¦í•˜ê±°ë‚˜, ë°˜ëŒ€ ì˜ê²¬ì„ íƒêµ¬ ì£¼ì œë¡œ ì‚¼ìŠµë‹ˆë‹¤." },
              { title: "4. í•´ê²°ì±… ì œì•ˆí˜•", desc: "í˜„ìƒ ì¡°ì‚¬ì—ì„œ ëë‚´ì§€ ë§ê³ , 'ìš°ë¦¬ëŠ” ë¬´ì—‡ì„ í•  ìˆ˜ ìˆëŠ”ê°€?' ì œì•ˆìœ¼ë¡œ ê²°ë¡ ì„ ë§Œë“­ë‹ˆë‹¤." },
            ],
          },
        },
        caseStudy: {
          before: "ë¹…ì¹´ì¸ì¦ˆ: â€˜ì „ë™ í‚¥ë³´ë“œ ì‚¬ê³  ê¸‰ì¦â€™ í‚¤ì›Œë“œ ê´€ê³„ë„ í™•ì¸",
          after: "ìš°ë¦¬ í•™êµ í•™ìƒë“¤ì˜ í—¬ë©§ ì°©ìš© ì‹¤íƒœ ì¡°ì‚¬ ë° ì¸ì‹ ê°œì„  ë„›ì§€(Nudge) ë””ìì¸ ì œì•ˆ",
          points: [
            "ë¹…ë°ì´í„°ë¡œ ì´ìŠˆ íŒŒì•…",
            "í•™êµ ë¬¸ì œë¡œ ì¶•ì†Œ(Localizing)",
            "í•´ê²°ì±…(ë””ìì¸) ì œì‹œ",
          ],
        },
      },

      life: {
        key: "life",
        color: "violet",
        label: "ìƒí™œ/ë°ì´í„°",
        titleCard: "4. ìƒí™œ ì† ë¶ˆí¸í•¨",
        descCard: "ì¼ìƒ ê´€ì°°ê³¼ ê³µê³µë°ì´í„° í™œìš©",
        title: "ìƒí™œ ì† ê´€ì°° ë° ë°ì´í„° í™œìš©",
        subTabs: ["observation", "publicdata"],
        content: {
          observation: {
            name: "1. ë¶ˆí¸í•¨ì´ ê³§ ì£¼ì œ",
            badge: "í•™êµ ìƒí™œ",
            steps: [
              { title: "1. â€˜ì™œ?â€™ë¼ê³  ë”´ì§€ ê±¸ê¸°", desc: "í•™êµ ìƒí™œ ì¤‘ ë¶ˆí¸í•˜ê±°ë‚˜ ë¹„íš¨ìœ¨ì ì¸ ê²ƒì„ ì°¾ìŠµë‹ˆë‹¤. (ì˜ˆ: ê¸‰ì‹ ì¤„ì€ ì™œ í•­ìƒ 2í•™ë…„ ìª½ì´ ëŠë¦´ê¹Œ?)" },
              { title: "2. ê´€ì°° ì¼ì§€ ì“°ê¸°", desc: "ì¼ì£¼ì¼ê°„ ë¶ˆí¸í•œ í˜„ìƒì„ ë°ì´í„°ë¡œ ê¸°ë¡í•©ë‹ˆë‹¤. (ì˜ˆ: ìš”ì¼ë³„ ê¸‰ì‹ ë©”ë‰´ì™€ ì”ë°˜ëŸ‰ ê´€ê³„)" },
              { title: "3. êµê³¼ ê°œë… ì•ˆê²½ ì“°ê¸°", desc: "í˜„ìƒì„ êµê³¼ì„œ ê°œë…ìœ¼ë¡œ ì„¤ëª…í•©ë‹ˆë‹¤. (ëŒ€ê¸°í–‰ë ¬/í™˜ê²½/í™”í•™ ë“±)" },
              { title: "4. ì‹¤í—˜/ì¡°ì‚¬ë¡œ ì¦ëª…", desc: "ë³€ì¸ì„ í†µì œí•´ ì‹¤í—˜í•˜ê±°ë‚˜ ì„¤ë¬¸ì¡°ì‚¬ë¡œ ê°€ì„¤ì´ ë§ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤." },
            ],
          },
          publicdata: {
            name: "2. ê³µê³µë°ì´í„° í™œìš©",
            badge: "ë°ì´í„° ë¶„ì„",
            steps: [
              { title: "1. ê³µê³µë°ì´í„°í¬í„¸ / KOSIS", desc: "ì„¤ë¬¸ ì—†ì´ë„ ì–‘ì§ˆì˜ ë°ì´í„°ë¥¼ í™•ë³´í•  ìˆ˜ ìˆëŠ” êµ­ê°€ í†µê³„Â·ê³µê³µë°ì´í„°ë¥¼ í™œìš©í•©ë‹ˆë‹¤." },
              { title: "2. ìƒê´€ê´€ê³„ ì°¾ê¸°", desc: "ê´€ë ¨ ì—†ì–´ ë³´ì´ëŠ” ë‘ ë°ì´í„°ë¥¼ ì—°ê²°í•´ ìƒˆë¡œìš´ ê°€ì„¤ì„ ì„¸ì›ë‹ˆë‹¤. (ì˜ˆ: ë¯¸ì„¸ë¨¼ì§€ì™€ ë„ì„œê´€ ëŒ€ì¶œ)" },
              { title: "3. ì—‘ì…€/íŒŒì´ì¬ ë¶„ì„", desc: "CSVë¥¼ ì‹œê°í™”Â·ë¶„ì„í•˜ë©´ ìˆ˜í–‰ ê·¼ê±°ê°€ ë©ë‹ˆë‹¤." },
              { title: "4. ì§€ì—­ ë¬¸ì œ í•´ê²°", desc: "ì§€ì—­ì˜ ë¯¼ì›/í†µê³„ ë°ì´í„°ë¥¼ ë¶„ì„í•´ ê°€ì¥ ì‹œê¸‰í•œ ê°œì„ ì ì„ ì œì•ˆí•©ë‹ˆë‹¤." },
            ],
          },
        },
        caseStudy: {
          before: "ê´€ì°°: â€˜ë¹„ ì˜¤ëŠ” ë‚ ì€ ì§€ê°ìƒì´ ë§ì€ ê²ƒ ê°™ì•„.â€™",
          after: "ê¸°ìƒ ë°ì´í„°ì™€ í•™êµ ì§€ê° í†µê³„ì˜ ìƒê´€ê´€ê³„ ë¶„ì„ ë° ë¹„ ì˜¤ëŠ” ë‚  êµí†µ ì²´ì¦ ì‹œë®¬ë ˆì´ì…˜",
          points: [
            "ì¼ìƒì˜ í˜¸ê¸°ì‹¬",
            "ê³µê³µë°ì´í„° í™œìš©",
            "í†µê³„ì  ë¶„ì„ ì—­ëŸ‰ ì–´í•„",
          ],
        },
      },
    };

    const SITE_DATA = [
      {
        id: "literature",
        category: "1. ìš°ìˆ˜ ì„ í–‰ì—°êµ¬ ë° ìµœì‹  ë™í–¥ (ë…¼ë¬¸)",
        emoji: "ğŸ“š",
        color: "blue",
        desc: "íƒêµ¬ì˜ ì‹œì‘ì€ ê¸°ì¡´ ì—°êµ¬ ì¡°ì‚¬ì…ë‹ˆë‹¤. ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” í•™ìˆ  ê²€ìƒ‰ ì—”ì§„ì…ë‹ˆë‹¤.",
        sites: [
          { name: "DBPia", url: "https://www.dbpia.co.kr", tag: "êµ­ë‚´ë…¼ë¬¸", desc: "ì£¼ì œë³„ ë¶„ë¥˜ê°€ ì˜ ë˜ì–´ ìˆì–´ íƒìƒ‰ì´ ì‰¬ìš´ í•™ìˆ ì§€ ì‚¬ì´íŠ¸" },
          { name: "RISS (í•™ìˆ ì—°êµ¬ì •ë³´)", url: "https://www.riss.kr", tag: "í•™ìœ„ë…¼ë¬¸", desc: "êµ­ë‚´ ì„/ë°•ì‚¬ í•™ìœ„ë…¼ë¬¸ ë¬´ë£Œ ì—´ëŒ. ì—°êµ¬ ë°©ë²• ë²¤ì¹˜ë§ˆí‚¹ìš©" },
          { name: "SCIENCEON", url: "https://scienceon.kisti.re.kr", tag: "ê³¼í•™ê¸°ìˆ ", desc: "ë…¼ë¬¸, íŠ¹í—ˆ, ë³´ê³ ì„œë¥¼ í•œ ë²ˆì— í†µí•© ê²€ìƒ‰ (KISTI ìš´ì˜)" },
          { name: "Google Scholar", url: "https://scholar.google.co.kr", tag: "í•´ì™¸ë…¼ë¬¸", desc: "ì „ ì„¸ê³„ ë…¼ë¬¸ ê²€ìƒ‰ ë° ì¸ìš© íšŸìˆ˜ í™•ì¸" },
          { name: "KISS (í•œêµ­í•™ìˆ ì •ë³´)", url: "https://kiss.kstudy.com", tag: "ì¸ë¬¸ì‚¬íšŒ", desc: "ì¸ë¬¸í•™, ì‚¬íšŒê³¼í•™ ë¶„ì•¼ì˜ ë°©ëŒ€í•œ ë…¼ë¬¸ ë°ì´í„°ë² ì´ìŠ¤" },
          { name: "êµ­íšŒë„ì„œê´€", url: "https://www.nanet.go.kr", tag: "ì •ì±…/ë²•ë¥ ", desc: "ì‚¬íšŒ ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ ì •ì±… ìë£Œ ë° íŒ©íŠ¸ë¶ ê²€ìƒ‰" }
        ]
      },
      {
        id: "data",
        category: "2. êµ­ê°€ ê³µê³µìë£Œ ë° í†µê³„ (ë°ì´í„°)",
        emoji: "ğŸ“Š",
        color: "emerald",
        desc: "ë‡Œí”¼ì…œ ë§ê³  ì˜¤í”¼ì…œ. ë³´ê³ ì„œì˜ ì‹ ë¢°ë„ë¥¼ ë†’ì—¬ì¤„ ê³µì‹ ë°ì´í„°ì…ë‹ˆë‹¤.",
        sites: [
          { name: "êµ­ê°€í†µê³„í¬í„¸ (KOSIS)", url: "https://kosis.kr", tag: "ê³µì‹í†µê³„", desc: "ëŒ€í•œë¯¼êµ­ ì¸êµ¬, ë¬¼ê°€, ê³ ìš© ë“± ëª¨ë“  ê³µì‹ í†µê³„ì˜ ê¸°ì¤€" },
          { name: "ê³µê³µë°ì´í„°í¬í„¸", url: "https://www.data.go.kr", tag: "Raw Data", desc: "ë‚ ì”¨, êµí†µ, í™˜ê²½ ë“± ê°€ê³µë˜ì§€ ì•Šì€ CSV ë°ì´í„° ì œê³µ" },
          { name: "ê¸°ìƒìë£Œê°œë°©í¬í„¸", url: "https://data.kma.go.kr", tag: "ë‚ ì”¨/ê¸°í›„", desc: "ê³¼ê±° 100ë…„ì¹˜ ë‚ ì”¨, ê¸°í›„ ë³€í™” ë°ì´í„° ë‹¤ìš´ë¡œë“œ" },
          { name: "SGIS (í†µê³„ì§€ë¦¬)", url: "https://sgis.kostat.go.kr", tag: "ì§€ë„/ì‹œê°í™”", desc: "ì§€ë„ ìœ„ì— ì¸êµ¬/ìƒê¶Œ í†µê³„ë¥¼ ì…í˜€ ë³´ì—¬ì£¼ëŠ” ì‹œê°í™” ë„êµ¬" },
          { name: "e-ë‚˜ë¼ì§€í‘œ", url: "https://www.index.go.kr", tag: "ì§€í‘œ", desc: "ë³µì¡í•œ í†µê³„ë¥¼ ë³´ê¸° ì‰¬ìš´ ê·¸ë˜í”„ë¡œ ìš”ì•½ ì œê³µ" }
        ]
      },
      {
        id: "science",
        category: "3. ê³¼í•™ ì¼ë°˜ ì•„ì´ë””ì–´ (Inspiration)",
        emoji: "ğŸ”­",
        color: "amber",
        desc: "ê³¼í•™ì  í˜¸ê¸°ì‹¬ì´ í•„ìš”í•  ë•Œ ë°©ë¬¸í•´ë³´ì„¸ìš”.",
        sites: [
          { name: "ì‚¬ì´ì–¸ìŠ¤íƒ€ì„ì¦ˆ", url: "https://www.sciencetimes.co.kr", tag: "ê³¼í•™ë‰´ìŠ¤", desc: "ìµœì‹  ê³¼í•™ ê¸°ìˆ  ë™í–¥ê³¼ ì´ìŠˆë¥¼ ë‹¤ë£¨ëŠ” ì „ë¬¸ ë‰´ìŠ¤" },
          { name: "êµ­ë¦½ì¤‘ì•™ê³¼í•™ê´€", url: "https://www.science.go.kr", tag: "ì „ëŒíšŒ", desc: "ì „êµ­ê³¼í•™ì „ëŒíšŒ ìˆ˜ìƒì‘ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ í†µí•´ ìˆ˜ì¤€ íŒŒì•…" },
          { name: "ì¹´ì˜¤ìŠ¤ì¬ë‹¨", url: "https://ikaos.org", tag: "ê³ ê¸‰ê°•ì—°", desc: "ê¸°ì´ˆ ê³¼í•™ ë¶„ì•¼ ì„í•™ë“¤ì˜ ê¹Šì´ ìˆëŠ” ê°•ì—° ì˜ìƒ" },
          { name: "ì‚¬ì´ì–¸ìŠ¤ì˜¬", url: "https://www.scienceall.com", tag: "ê³¼í•™ë¬¸í™”", desc: "ê³¼í•™ ìš©ì–´ ì‚¬ì „, ì¹´ë“œë‰´ìŠ¤ ë“± í¥ë¯¸ë¡œìš´ ì½˜í…ì¸ " },
          { name: "ë™ì•„ì‚¬ì´ì–¸ìŠ¤", url: "https://www.dongascience.com", tag: "ê³¼í•™ë§¤ê±°ì§„", desc: "ì²­ì†Œë…„ ëˆˆë†’ì´ì˜ ìµœì‹  ê³¼í•™ ê¸°ì‚¬" }
        ]
      },
      {
        id: "subject",
        category: "4. ë¶„ì•¼ë³„ ì‹¬í™” íƒêµ¬ (ì „ê³µ ì í•©ì„±)",
        emoji: "ğŸ§¬",
        color: "violet",
        desc: "í¬ë§ ì „ê³µê³¼ ê´€ë ¨ëœ ê¹Šì´ ìˆëŠ” ìë£Œë¥¼ ì°¾ëŠ” ì „ë¬¸ ê¸°ê´€ì…ë‹ˆë‹¤.",
        sites: [
          { name: "í•œêµ­ìƒëª…ê³µí•™ì—°êµ¬ì›", url: "https://www.kribb.re.kr", tag: "ìƒëª…ê³¼í•™", desc: "ë°”ì´ì˜¤ ìµœì‹  ë‰´ìŠ¤ ë° ì—°êµ¬ ì„±ê³¼" },
          { name: "ë°”ì´ì˜¤ì•ˆì „ì„±ì •ë³´", url: "https://www.biosafety.or.kr", tag: "GMO/ì•ˆì „", desc: "LMO, ìœ ì „ì ë³€í˜• ìƒë¬¼ì²´ ì•ˆì „ ì •ë³´" },
          { name: "ë©”ë””ì¹¼íƒ€ì„ì¦ˆ", url: "https://www.medicaltimes.com", tag: "ì˜í•™/ë³´ê±´", desc: "ì˜ë£Œê³„ ìµœì‹  ì´ìŠˆ ë° ì •ì±… ë‰´ìŠ¤" },
          { name: "SWì¤‘ì‹¬ì‚¬íšŒ", url: "https://www.software.kr", tag: "SW/AI", desc: "ì†Œí”„íŠ¸ì›¨ì–´ ì •ì±…, AI êµìœ¡ ë° ì‚°ì—… ë™í–¥" },
          { name: "ITFIND", url: "https://www.itfind.or.kr", tag: "ICT", desc: "ì •ë³´í†µì‹  ê¸°ìˆ  ì—°êµ¬ ë³´ê³ ì„œ ë° ë™í–¥" },
          { name: "Baekjoon OJ", url: "https://www.acmicpc.net", tag: "ì½”ë”©", desc: "ì•Œê³ ë¦¬ì¦˜ ë¬¸ì œ í’€ì´ ë° í”„ë¡œê·¸ë˜ë° ì—°ìŠµ" },
          { name: "ê¸°ê³„Â·ë¡œë´‡ì—°êµ¬ì •ë³´", url: "https://www.materic.or.kr", tag: "ê¸°ê³„/ë¡œë´‡", desc: "ê¸°ê³„ ë° ë¡œë´‡ ê´€ë ¨ ë…¼ë¬¸, ê¸°ìˆ  ë™í–¥" },
          { name: "í•œêµ­ë¬¼ë¦¬í•™íšŒ", url: "https://www.kps.or.kr", tag: "ë¬¼ë¦¬", desc: "ë¬¼ë¦¬í•™ í•™ìˆ  ì •ë³´ ë° í–‰ì‚¬" },
          { name: "í•œêµ­í™”í•™ì—°êµ¬ì›", url: "https://www.krict.re.kr", tag: "í™”í•™", desc: "í™”í•™ ê´€ë ¨ ìµœì‹  ì—°êµ¬ ì„±ê³¼" },
          { name: "ì•Œì§€ì˜¤ë§¤ìŠ¤", url: "https://www.algeomath.kr", tag: "ìˆ˜í•™", desc: "ë„í˜•, ê·¸ë˜í”„ë¥¼ ì§ì ‘ ê·¸ë ¤ë³´ëŠ” ìˆ˜í•™ íƒêµ¬ ë„êµ¬" },
          { name: "êµ­ë¦½êµ­ì–´ì›", url: "https://www.korean.go.kr", tag: "êµ­ì–´", desc: "í‘œì¤€êµ­ì–´ëŒ€ì‚¬ì „, ì–´ë¬¸ ê·œë²” ìë£Œ" },
          { name: "êµ­í† ì§€ë¦¬ì •ë³´ì›", url: "https://www.ngii.go.kr", tag: "ì§€ë¦¬", desc: "ìˆ˜ì¹˜ì§€ë„, í•­ê³µì‚¬ì§„ ë“± êµ­í†  ì •ë³´" },
          { name: "í•œêµ­ì˜ì–´ì˜ë¬¸í•™íšŒ", url: "https://www.ellak.or.kr", tag: "ì˜ë¬¸í•™", desc: "ì˜ì–´ì˜ë¬¸í•™ ê´€ë ¨ í•™ìˆ  ì •ë³´" },
          { name: "í•œêµ­ë¬¸í™”ì‚¬íšŒí•™íšŒ", url: "https://socul.or.kr", tag: "ì‚¬íšŒ", desc: "ë¬¸í™” ì‚¬íšŒí•™ ê´€ë ¨ ì—°êµ¬" },
          { name: "ì°¾ê¸°ì‰¬ìš´ ìƒí™œë²•ë ¹", url: "https://www.easylaw.go.kr", tag: "ë²•/ì‚¬íšŒ", desc: "ì¼ìƒ ìƒí™œê³¼ ê´€ë ¨ëœ ë²•ë ¹ì„ ì‰½ê²Œ í’€ì´" }
        ]
      },
      {
        id: "tools",
        category: "5. ë¶„ì„ ë„êµ¬ ë° ìœ í‹¸ë¦¬í‹° (í•„ìˆ˜)",
        emoji: "ğŸ› ï¸",
        color: "rose",
        desc: "ë³´ê³ ì„œ ì‘ì„±ì„ ë„ì™€ì£¼ëŠ” ì‹¤ì „ ë„êµ¬ë“¤ì…ë‹ˆë‹¤.",
        sites: [
          { name: "ì¹´í”¼í‚¬ëŸ¬", url: "https://www.copykiller.com", tag: "í‘œì ˆê²€ì‚¬", desc: "ë³´ê³ ì„œ ì œì¶œ ì „ í‘œì ˆë¥  í™•ì¸ í•„ìˆ˜ (ì—°êµ¬ ìœ¤ë¦¬)" },
          { name: "ë¶€ì‚°ëŒ€ ë§ì¶¤ë²• ê²€ì‚¬ê¸°", url: "http://speller.cs.pusan.ac.kr", tag: "êµì •", desc: "í•œêµ­ì–´ ë§ì¶¤ë²•/ë¬¸ë²• êµì •ê¸°" },
          { name: "í†µê·¸ë¼ë¯¸", url: "https://tong.kostat.go.kr", tag: "í†µê³„íˆ´", desc: "êµìœ¡ìš© í†µê³„ í”„ë¡œê·¸ë¨. ì„¤ë¬¸ ê²°ê³¼ ê·¸ë˜í”„ ì œì‘ì— ìµœì " },
          { name: "ë¹…ì¹´ì¸ì¦ˆ", url: "https://www.bigkinds.or.kr", tag: "ë‰´ìŠ¤ë¶„ì„", desc: "ë‰´ìŠ¤ í‚¤ì›Œë“œ ê´€ê³„ë„ ë¶„ì„ ì œê³µ" },
          { name: "ë¯¸ë¦¬ìº”ë²„ìŠ¤", url: "https://www.miricanvas.com", tag: "ë””ìì¸", desc: "ë³´ê³ ì„œ í‘œì§€, ë°œí‘œ PPT ë””ìì¸ ì œì‘" },
          { name: "ë©˜í‹°ë¯¸í„°", url: "https://www.mentimeter.com", tag: "ì„¤ë¬¸/íˆ¬í‘œ", desc: "ì‹¤ì‹œê°„ ì„¤ë¬¸ì¡°ì‚¬ ë° ì›Œë“œí´ë¼ìš°ë“œ ìƒì„± ë„êµ¬" }
        ]
      }
    ];

    const SITE_COLOR = {
      blue:    { pill: "bg-blue-50 text-blue-700 border-blue-100",   icon: "bg-blue-100 text-blue-600",   corner: "bg-blue-50",   hoverIcon: "group-hover:text-blue-500",   hoverTitle: "group-hover:text-blue-700",   btn: "hover:bg-blue-50 hover:text-blue-600 hover:border-blue-200" },
      emerald: { pill: "bg-emerald-50 text-emerald-700 border-emerald-100", icon: "bg-emerald-100 text-emerald-600", corner: "bg-emerald-50", hoverIcon: "group-hover:text-emerald-500", hoverTitle: "group-hover:text-emerald-700", btn: "hover:bg-emerald-50 hover:text-emerald-600 hover:border-emerald-200" },
      amber:   { pill: "bg-amber-50 text-amber-700 border-amber-100", icon: "bg-amber-100 text-amber-600", corner: "bg-amber-50", hoverIcon: "group-hover:text-amber-500", hoverTitle: "group-hover:text-amber-700", btn: "hover:bg-amber-50 hover:text-amber-600 hover:border-amber-200" },
      violet:  { pill: "bg-violet-50 text-violet-700 border-violet-100", icon: "bg-violet-100 text-violet-600", corner: "bg-violet-50", hoverIcon: "group-hover:text-violet-500", hoverTitle: "group-hover:text-violet-700", btn: "hover:bg-violet-50 hover:text-violet-600 hover:border-violet-200" },
      rose:    { pill: "bg-rose-50 text-rose-700 border-rose-100",   icon: "bg-rose-100 text-rose-600",   corner: "bg-rose-50",   hoverIcon: "group-hover:text-rose-500",   hoverTitle: "group-hover:text-rose-700",   btn: "hover:bg-rose-50 hover:text-rose-600 hover:border-rose-200" },
    };

    const ResourceCheatkey = () => {
      const clamp2 = {
        display: "-webkit-box",
        WebkitBoxOrient: "vertical",
        WebkitLineClamp: 2,
        overflow: "hidden",
      };

      const scrollToCategory = (id) => {
        const el = document.getElementById(`res-${id}`);
        if (el) el.scrollIntoView({ behavior: "smooth", block: "start" });
      };

      const CAT_BTNS = [
        { id: "literature", label: "ğŸ“š ë…¼ë¬¸/í•™ìˆ " },
        { id: "data",       label: "ğŸ“Š ë°ì´í„°/í†µê³„" },
        { id: "science",    label: "ğŸ”­ ê³¼í•™ ì¼ë°˜" },
        { id: "subject",    label: "ğŸ§¬ ë¶„ì•¼ë³„ ì‹¬í™”" },
        { id: "tools",      label: "ğŸ› ï¸ ë„êµ¬/ìœ í‹¸" },
      ];

      return (
        <div className="bg-white rounded-[40px] border border-slate-100 shadow-sm p-8 md:p-10">
          <div className="mb-8 border-b border-slate-200 pb-6">
            <h3 className="text-2xl md:text-3xl font-black text-slate-900 tracking-tight">
              ğŸ§° íƒêµ¬ë³´ê³ ì„œ ì¹˜íŠ¸í‚¤ (ì‚¬ì´íŠ¸ ëª¨ìŒ)
            </h3>
            <p className="text-slate-500 mt-2 font-bold text-sm">
              ë…¼ë¬¸ ê²€ìƒ‰ë¶€í„° ë°ì´í„° ë¶„ì„, ìœ¤ë¦¬ ê²€ì‚¬ê¹Œì§€. ì¦ê²¨ì°¾ê¸° í•´ë‘ê³  í•„ìš”í•  ë•Œ êº¼ë‚´ ì“°ì„¸ìš”.
            </p>
          </div>

          {/* ì¹´í…Œê³ ë¦¬ ë²„íŠ¼(ìŠ¤í¬ë¡¤ ì´ë™) */}
          <div className="flex flex-wrap gap-2 mb-8 sticky top-24 bg-white/90 backdrop-blur z-20 py-2">
            {CAT_BTNS.map((b) => {
              const section = SITE_DATA.find((s) => s.id === b.id);
              const c = SITE_COLOR[section?.color || "blue"];
              return (
                <button
                  key={b.id}
                  type="button"
                  onClick={() => scrollToCategory(b.id)}
                  className={
                    "px-4 py-2 bg-white border border-slate-200 rounded-full text-sm font-black text-slate-600 transition-all shadow-sm " +
                    c.btn
                  }
                >
                  {b.label}
                </button>
              );
            })}
          </div>

          {/* ì„¹ì…˜ ë Œë” */}
          <div className="space-y-16">
            {SITE_DATA.map((section) => {
              const c = SITE_COLOR[section.color] || SITE_COLOR.blue;

              return (
                <div key={section.id} id={`res-${section.id}`} className="scroll-mt-32">
                  <div className="flex items-center gap-3 mb-5">
                    <span className={`${c.icon} p-2 rounded-xl text-xl`}>
                      {section.emoji}
                    </span>
                    <div>
                      <h4 className="text-lg md:text-xl font-black text-slate-900">
                        {section.category}
                      </h4>
                      <p className="text-xs text-slate-500 font-bold mt-1">
                        {section.desc}
                      </p>
                    </div>
                  </div>

                  <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
                    {section.sites.map((site) => (
                      <a
                        key={site.name}
                        href={site.url}
                        target="_blank"
                        rel="noreferrer"
                        className="bg-white p-5 rounded-xl border border-slate-200 block group relative overflow-hidden transition-all duration-200 hover:-translate-y-1 hover:shadow-md hover:border-slate-400"
                      >
                        <div className={`absolute top-0 right-0 w-16 h-16 ${c.corner} rounded-bl-full -mr-8 -mt-8 transition-transform group-hover:scale-150`} />

                        <div className="relative z-10">
                          <div className="flex justify-between items-start mb-2">
                            <span className={`text-[10px] font-black px-2 py-0.5 rounded-md border ${c.pill}`}>
                              {site.tag}
                            </span>

                            <svg
                              className={`w-4 h-4 text-slate-300 transition-colors ${c.hoverIcon}`}
                              fill="none"
                              stroke="currentColor"
                              viewBox="0 0 24 24"
                            >
                              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                            </svg>
                          </div>

                          <div className={`font-black text-slate-800 transition-colors truncate mb-1 ${c.hoverTitle}`} title={site.name}>
                            {site.name}
                          </div>

                          <p className="text-xs text-slate-500 leading-relaxed" style={clamp2}>
                            {site.desc}
                          </p>
                        </div>
                      </a>
                    ))}
                  </div>
                </div>
              );
            })}
          </div>
        </div>
      );
    };

    /****************************************************************
     * 3) (B) UI: 4ëŒ€ ì „ëµ ëª¨ë“ˆ ì»´í¬ë„ŒíŠ¸ (case 11ì—ì„œ ì‚¬ìš©)
     *    - ìˆ˜ì •: "íƒêµ¬ì£¼ì œ ì°¾ê¸° ë°©ë²•" íƒ­ì—ì„œ ì°¸ì¡°ì‚¬ì´íŠ¸(<ResourceCheatkey />)ë¥¼ ì œê±°í–ˆìŠµë‹ˆë‹¤.
     ****************************************************************/
    const ResearchStrategyModule = () => {
      const [strategy, setStrategy] = React.useState("papers");
      const [subTabs, setSubTabs] = React.useState({
        papers: "dbpia",
        books: "selection",
        news: "sources",
        life: "observation",
      });

      const data = STRATEGY_DATA[strategy];
      const currentSub = subTabs[strategy];
      const block = data.content?.[currentSub] || null;
      const steps = block?.steps || [];

      React.useEffect(() => {
        if (window.lucide) window.lucide.createIcons();
      }, [strategy, currentSub]);

      const COLOR = {
        blue: {
          ring: "ring-blue-500",
          border: "border-blue-200",
          hoverBorder: "hover:border-blue-300",
          stepHoverBorder: "group-hover:border-blue-300",
          softBg: "bg-blue-50",
          softText: "text-blue-700",
          solidBg: "bg-blue-600",
        },
        amber: {
          ring: "ring-amber-500",
          border: "border-amber-200",
          hoverBorder: "hover:border-amber-300",
          stepHoverBorder: "group-hover:border-amber-300",
          softBg: "bg-amber-50",
          softText: "text-amber-700",
          solidBg: "bg-amber-600",
        },
        emerald: {
          ring: "ring-emerald-500",
          border: "border-emerald-200",
          hoverBorder: "hover:border-emerald-300",
          stepHoverBorder: "group-hover:border-emerald-300",
          softBg: "bg-emerald-50",
          softText: "text-emerald-700",
          solidBg: "bg-emerald-600",
        },
        violet: {
          ring: "ring-violet-500",
          border: "border-violet-200",
          hoverBorder: "hover:border-violet-300",
          stepHoverBorder: "group-hover:border-violet-300",
          softBg: "bg-violet-50",
          softText: "text-violet-700",
          solidBg: "bg-violet-600",
        },
      };

      const c = COLOR[data.color];

      const select = (next) => {
        setStrategy(next);
        const nextData = STRATEGY_DATA[next];
        setSubTabs((prev) => {
          const cur = prev[next];
          const fallback = nextData.subTabs?.[0];
          return { ...prev, [next]: cur || fallback };
        });
      };

      const setSub = (sub) => setSubTabs((prev) => ({ ...prev, [strategy]: sub }));

      const cardBase =
        "cursor-pointer bg-white p-7 rounded-[32px] border shadow-sm transition-all text-left";
      const activeCard = "ring-4 ring-indigo-50 scale-[1.02] shadow-xl";

      const StrategyCard = ({ k, icon, color, label, title, desc }) => {
        const isActive = strategy === k;
        const cc = COLOR[color];

        return (
          <button
            type="button"
            onClick={() => select(k)}
            className={
              `${cardBase} ` +
              (isActive
                ? `ring-2 ${cc.ring} ${activeCard} ${cc.border}`
                : `border-slate-200 ${cc.hoverBorder}`)
            }
          >
            <div className="flex items-start justify-between gap-4">
              <div>
                <span
                  className={`${cc.softBg} ${cc.softText} text-[10px] font-black px-3 py-1 rounded-full uppercase tracking-widest inline-block mb-3`}
                >
                  {label}
                </span>
                <div className="text-lg font-black text-slate-900 tracking-tight">
                  {title}
                </div>
                <div className="text-xs text-slate-500 font-bold mt-2 leading-relaxed">
                  {desc}
                </div>
              </div>
              <div className={`${cc.softBg} p-3 rounded-2xl shrink-0`}>
                <i data-lucide={icon} className={`w-6 h-6 ${cc.softText}`}></i>
              </div>
            </div>
          </button>
        );
      };

      return (
        <div className="space-y-10 fade-in">
          {/* Header */}
          <div className="flex items-center justify-between gap-6 flex-wrap">
            <div>
              <h2 className="text-4xl font-black tracking-tighter text-amber-600 flex items-center gap-4">
                <i data-lucide="search" className="w-10 h-10"></i>
                íƒêµ¬ ì£¼ì œ ì°¾ê¸° ë¹„ë²•
              </h2>
              <p className="text-slate-500 font-bold mt-3 text-sm">
                ë…¼ë¬¸Â·ì±…Â·ë‰´ìŠ¤Â·ìƒí™œ ë°ì´í„°. 4ê°€ì§€ ë£¨íŠ¸ë¡œ íƒêµ¬ ì£¼ì œë¥¼ ë¹ ë¥´ê²Œ êµ¬ì²´í™”í•©ë‹ˆë‹¤.
              </p>
              <p className="text-slate-400 font-bold mt-2 text-xs">
                â€» ì°¸ì¡°ì‚¬ì´íŠ¸ ëª¨ìŒì€ ìƒë‹¨ì˜ <b>ì°¸ì¡°ì‚¬ì´íŠ¸</b> íƒ­ì—ì„œ í™•ì¸í•©ë‹ˆë‹¤.
              </p>
            </div>

            <div className="bg-slate-900 text-white rounded-[28px] px-6 py-4 shadow-xl border border-white/5">
              <div className="text-[10px] font-black uppercase tracking-[0.3em] text-slate-400">
                Quick Rule
              </div>
              <div className="text-sm font-black mt-1">
                â€œì°¾ê³  â†’ ë³€í˜•í•˜ê³  â†’ ì¸¡ì • ê°€ëŠ¥í•˜ê²Œ ë§Œë“ ë‹¤â€
              </div>
            </div>
          </div>

          {/* 4 Cards */}
          <div className="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6">
            <StrategyCard
              k="papers"
              icon="graduation-cap"
              color="blue"
              label={STRATEGY_DATA.papers.label}
              title={STRATEGY_DATA.papers.titleCard}
              desc={STRATEGY_DATA.papers.descCard}
            />
            <StrategyCard
              k="books"
              icon="book-open"
              color="amber"
              label={STRATEGY_DATA.books.label}
              title={STRATEGY_DATA.books.titleCard}
              desc={STRATEGY_DATA.books.descCard}
            />
            <StrategyCard
              k="news"
              icon="newspaper"
              color="emerald"
              label={STRATEGY_DATA.news.label}
              title={STRATEGY_DATA.news.titleCard}
              desc={STRATEGY_DATA.news.descCard}
            />
            <StrategyCard
              k="life"
              icon="lightbulb"
              color="violet"
              label={STRATEGY_DATA.life.label}
              title={STRATEGY_DATA.life.titleCard}
              desc={STRATEGY_DATA.life.descCard}
            />
          </div>

          {/* Detail Panel */}
          <div className="bg-white rounded-[40px] shadow-xl border border-slate-100 overflow-hidden">
            <div className="flex flex-col lg:flex-row">
              {/* Left */}
              <div className="flex-1 p-8 md:p-12 border-b lg:border-b-0 lg:border-r border-slate-100">
                <div className="mb-6">
                  <span
                    className={`${c.softBg} ${c.softText} px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest inline-block`}
                  >
                    Step-by-Step Guide
                  </span>

                  <div className="mt-4 flex items-end justify-between flex-wrap gap-4">
                    <div>
                      <h3 className="text-2xl md:text-3xl font-black text-slate-900 tracking-tighter">
                        {data.title}
                      </h3>
                      <p className="text-slate-500 font-bold text-sm mt-2">
                        {block?.badge ? `${block.badge} Â· ` : ""}
                        {block?.name || ""}
                      </p>
                    </div>

                    {/* Sub Tabs */}
                    {data.subTabs?.length ? (
                      <div className="bg-slate-100 p-1.5 rounded-2xl inline-flex flex-wrap gap-2">
                        {data.subTabs.map((sub) => {
                          const isOn = currentSub === sub;
                          return (
                            <button
                              key={sub}
                              type="button"
                              onClick={() => setSub(sub)}
                              className={
                                "px-4 py-2 rounded-xl text-xs font-black transition-all " +
                                (isOn
                                  ? "bg-white text-slate-900 shadow-sm border border-slate-200"
                                  : "text-slate-500 hover:text-slate-700")
                              }
                            >
                              {data.content[sub].name}
                            </button>
                          );
                        })}
                      </div>
                    ) : null}
                  </div>
                </div>

                {/* Steps */}
                <div className="relative">
                  <div className="absolute left-4 top-3 bottom-3 w-px bg-slate-100"></div>
                  <div className="space-y-7">
                    {steps.map((step, idx) => {
                      const isFirst = idx === 0;
                      return (
                        <div key={idx} className="relative flex gap-6 items-start group">
                          <div
                            className={
                              "relative z-10 w-8 h-8 rounded-full flex items-center justify-center font-black text-xs shadow-sm transition-colors " +
                              (isFirst
                                ? `${c.solidBg} text-white`
                                : `bg-white border-2 border-slate-200 text-slate-400 ${c.stepHoverBorder}`)
                            }
                          >
                            {idx + 1}
                          </div>
                          <div className="flex-1 pt-0.5">
                            <h4 className="font-black text-slate-900 text-lg tracking-tight">
                              {step.title}
                            </h4>
                            <p className="text-slate-500 text-sm font-medium mt-2 leading-relaxed">
                              {step.desc}
                            </p>
                          </div>
                        </div>
                      );
                    })}
                  </div>
                </div>
              </div>

              {/* Right */}
              <div className="lg:w-[40%] bg-slate-50 p-8 md:p-12">
                <div className="bg-white rounded-[32px] shadow-sm border border-slate-200 p-8 h-full flex flex-col">
                  <div className="flex items-center gap-3 mb-6">
                    <div className={`${c.softBg} ${c.softText} p-3 rounded-2xl`}>
                      <i data-lucide="sparkles" className={`w-5 h-5 ${c.softText}`}></i>
                    </div>
                    <div>
                      <div className="text-slate-900 font-black tracking-tight">
                        ì‹¤ì „ ë³€í˜• ì˜ˆì‹œ (Adaptation)
                      </div>
                      <div className="text-[11px] text-slate-500 font-bold mt-1">
                        â€˜ê·¸ëŒ€ë¡œâ€™ê°€ ì•„ë‹ˆë¼ â€˜ë³€í˜•â€™ì´ í•µì‹¬ì…ë‹ˆë‹¤.
                      </div>
                    </div>
                  </div>

                  <div className="space-y-6 flex-1">
                    <div className="opacity-70">
                      <div className="text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2">
                        Before
                      </div>
                      <div className="p-4 border-l-4 border-slate-300 bg-slate-50 rounded-r-2xl text-sm text-slate-600 font-medium italic">
                        {data.caseStudy.before}
                      </div>
                    </div>

                    <div className="flex justify-center text-slate-300">
                      <i data-lucide="arrow-down" className="w-6 h-6 animate-bounce"></i>
                    </div>

                    <div>
                      <div className={`text-[10px] font-black uppercase tracking-widest mb-2 ${c.softText}`}>
                        After
                      </div>
                      <div className={`p-5 border-l-4 ${c.softBg} rounded-r-2xl text-sm font-black text-slate-900 shadow-sm`}>
                        {data.caseStudy.after}
                      </div>
                      <ul className="mt-5 space-y-2">
                        {data.caseStudy.points.map((p, i) => (
                          <li key={i} className="flex items-start gap-2 text-xs text-slate-600 font-bold">
                            <span className={`${c.softText} mt-0.5`}>â—</span>
                            <span>{p}</span>
                          </li>
                        ))}
                      </ul>
                    </div>
                  </div>

                  <div className="mt-8 p-5 rounded-[24px] bg-slate-900 text-white border border-white/5 shadow-xl">
                    <div className="text-[10px] font-black uppercase tracking-[0.3em] text-slate-400">
                      Tip
                    </div>
                    <div className="text-sm font-black mt-1">
                      ë³€í˜• ê·œì¹™: ëŒ€ìƒÂ·ì§€ì—­Â·ê¸°ê°„Â·ë³€ìˆ˜ ì¤‘ 1~2ê°œë§Œ ë°”ê¿‰ë‹ˆë‹¤.
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          {/* (ì¤‘ìš”) ì—¬ê¸°ì„œëŠ” ì°¸ì¡°ì‚¬ì´íŠ¸ ëª©ë¡ì„ ë Œë”ë§í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. */}
        </div>
      );
    };

    /****************************************************************
     * 4) TabContent (case 11: ResearchStrategyModuleë¡œ êµì²´)
     ****************************************************************/
    const TabContent = ({ activeTab, studentInfo, sessionData, handleStudent, handleInput, handleAiConsult, aiLoading }) => {
      const SectionHeader = ({ title, subTitle, btnText, onBtnClick }) => (
        <div className="flex justify-between items-center border-b pb-8 mb-8">
          <div>
            <h2 className="text-4xl font-black text-slate-900 tracking-tighter">{title}</h2>
            {subTitle && <p className="text-slate-400 font-bold mt-1 text-xs uppercase">{subTitle}</p>}
          </div>
          {btnText && (
            <button
              onClick={onBtnClick}
              disabled={aiLoading}
              className="btn-ai-glow text-white px-8 py-4 rounded-3xl text-sm font-black flex items-center gap-2 active:scale-95 shadow-2xl disabled:opacity-60 disabled:cursor-not-allowed"
            >
              <i data-lucide="sparkles" className="w-5 h-5 text-amber-300"></i> {btnText}
            </button>
          )}
        </div>
      );

      switch (activeTab) {
        case 0: return (
          <div className="space-y-12 fade-in">
            <SectionHeader title="ì •ë³´ ì…ë ¥" subTitle="Personal Profile" />
            <div className="grid grid-cols-1 md:grid-cols-2 gap-10">
              <InputField label="í•™êµëª…" name="school" value={studentInfo.school} onChange={handleStudent} placeholder="OOê³ ë“±í•™êµ" />
              <InputField label="í•™ë²ˆ" name="gradeClass" value={studentInfo.gradeClass} onChange={handleStudent} placeholder="ì˜ˆ: 20101" />
              <InputField label="ì„±ëª…" name="name" value={studentInfo.name} onChange={handleStudent} placeholder="í™ê¸¸ë™" />
              <InputField label="í¬ë§ ì „ê³µ" name="major" value={studentInfo.major} onChange={handleStudent} placeholder="ì˜ˆ: ìƒëª…ê³µí•™" />
            </div>
            <div className="mt-10 p-8 bg-indigo-50/50 rounded-[32px] border border-indigo-100 italic font-bold text-indigo-800 text-sm">
              â€» ì…ë ¥ ì •ë³´ëŠ” ë¦¬í¬íŠ¸ì˜ í‘œì§€ ë° AI ë¶„ì„ ì‹œ ê¸°ì´ˆ ìë£Œë¡œ í™œìš©ë©ë‹ˆë‹¤.
            </div>
          </div>
        );

        case 11: return (<ResearchStrategyModule />);

        case 1: return (
          <div className="fade-in space-y-10">
            <SectionHeader title="1ì°¨ì‹œ: ì£¼ì œ & ì§ˆë¬¸" subTitle="Research Topic & Question" btnText="AI ì£¼ì œ ì •êµí™”" onBtnClick={handleAiConsult} />
            <div className="space-y-10">
              <InputField label="íƒêµ¬ ì£¼ì œ (ê°€ì œ)" name="s1_topic" value={sessionData.s1_topic} onChange={handleInput} placeholder="ì˜ˆ: ì¬ìƒ ì—ë„ˆì§€ë¥¼ í™œìš©í•œ ì¹œí™˜ê²½ ë„ì‹œ ì„¤ê³„ ë°©ì•ˆ ì—°êµ¬" />
              <TextAreaField label="íƒêµ¬ ë™ê¸° ë° ê³„ê¸°" name="s1_motive" value={sessionData.s1_motive} onChange={handleInput} height="h-40" placeholder="ìˆ˜ì—… ì¤‘ ìƒê¸´ ê¶ê¸ˆì¦ì´ë‚˜ ì‚¬íšŒì  ì‚¬ê±´ ë“± êµ¬ì²´ì ì¸ ë™ê¸°ë¥¼ ì‘ì„±í•˜ì„¸ìš”." />
              <InputField label="í•µì‹¬ íƒêµ¬ ì§ˆë¬¸ (RQ)" name="s1_question" value={sessionData.s1_question} onChange={handleInput} placeholder="ì˜ˆ: ì–´ë–¤ ë³€ì¸ì´ ê²°ê³¼ì— ê°€ì¥ í° ì˜í–¥ì„ ë¯¸ì¹˜ëŠ”ê°€?" />
              <TextAreaField label="êµê³¼/ì „ê³µ ì—°ê²° ê³ ë¦¬" name="s1_connection" value={sessionData.s1_connection} onChange={handleInput} placeholder="êµê³¼ì„œì˜ ì–´ë–¤ ì›ë¦¬ê°€ ì „ê³µì˜ ì–´ë–¤ ê°œë…ê³¼ ì—°ê²°ë˜ë‚˜ìš”?" />
            </div>
          </div>
        );

        case 14: return (<ResourceCheatkey />);

        case 2: return (
          <div className="fade-in space-y-10">
            <SectionHeader title="2ì°¨ì‹œ: ë„ì„œ ë° íƒêµ¬ ê³„íš" btnText="AI í‚¤ì›Œë“œ ì¶”ì¶œ" onBtnClick={handleAiConsult} />
            <div className="grid grid-cols-1 md:grid-cols-2 gap-10">
              <InputField label="ì‹¬í™” ë„ì„œëª…" name="s2_book" value={sessionData.s2_book} onChange={handleInput} placeholder="ì±… ì œëª©" />
              <InputField label="ì €ì" name="s2_author" value={sessionData.s2_author} onChange={handleInput} placeholder="ì €ìëª…" />
              <div className="space-y-4">
                <Label>ë„ì„œ ë‚œì´ë„</Label>
                <select
                  name="s2_level"
                  value={sessionData.s2_level}
                  onChange={handleInput}
                  className="w-full p-6 rounded-3xl bg-slate-50 font-black text-lg appearance-none outline-none focus:ring-4 focus:ring-indigo-100 border border-slate-100"
                >
                  <option>ì „ê³µ ê¸°ì´ˆ(ê°œë¡ )</option>
                  <option>ì „ë¬¸ í•™ìˆ ì„œ</option>
                  <option>êµì–‘ì„œ</option>
                  <option>ì›ì „/ê³ ì „</option>
                </select>
              </div>
              <div className="space-y-4">
                <Label>ìµœì¢… ì‚°ì¶œë¬¼ ëª©í‘œ</Label>
                <select
                  name="s2_goal"
                  value={sessionData.s2_goal}
                  onChange={handleInput}
                  className="w-full p-6 rounded-3xl bg-slate-50 font-black text-lg appearance-none outline-none focus:ring-4 focus:ring-indigo-100 border border-slate-100"
                >
                  <option>í•™ìˆ  ë³´ê³ ì„œ</option>
                  <option>ë°ì´í„° ë¦¬í¬íŠ¸</option>
                  <option>ì‹¤í—˜ ë³´ê³ ì„œ</option>
                  <option>ì •ì±… ì œì•ˆì„œ</option>
                </select>
              </div>
            </div>
            <InputField label="ì§‘ì¤‘ íƒë… ì§€ì  (ë°œì·Œë… ì±•í„°)" name="s2_part" value={sessionData.s2_part} onChange={handleInput} placeholder="ì˜ˆ: ì œ3ì¥ ë°ì´í„° ë¦¬í„°ëŸ¬ì‹œì˜ ì‹¤ì œì  ì ìš© ì‚¬ë¡€" />
          </div>
        );

        case 3: return (
          <div className="fade-in space-y-10">
            <SectionHeader title="3ì°¨ì‹œ: ë„ì„œ ì‹¬í™” ë¶„ì„" btnText="ì§€ì‹ ì •êµí™” ì½”ì¹­" onBtnClick={handleAiConsult} />
            <TextAreaField label="êµê³¼ì„œ ë„ˆë¨¸ì˜ ì§€ì‹ (Depth Analysis)" name="s3_depth" value={sessionData.s3_depth} onChange={handleInput} height="h-80" placeholder="ë„ì„œë¥¼ í†µí•´ ìƒˆë¡­ê²Œ ì•Œê²Œ ëœ í•™ìˆ ì  ì›ë¦¬ë¥¼ ìƒì„¸íˆ ì •ë¦¬í•˜ì„¸ìš”." />
            <InputField label="ì¶”ê°€ ìë£Œ ì¶”ì " name="s3_trace" value={sessionData.s3_trace} onChange={handleInput} placeholder="ì±…ì—ì„œ ì–¸ê¸‰ëœ ë…¼ë¬¸ì´ë‚˜ ë‹¤ë¥¸ ë„ì„œ ë¦¬ìŠ¤íŠ¸" />
          </div>
        );

        case 4: return (
          <div className="fade-in space-y-10">
            <SectionHeader title="4ì°¨ì‹œ: ë…¼ë¬¸ ë°ì´í„° ë¶„ì„" subTitle="Scholarly Evidence & Facts" btnText="AI ì£¼ê·¼ì„¤ ë¬¸ì¥ ìƒì„±" onBtnClick={handleAiConsult} />
            <TextAreaField label="ìµœì‹  í•™ìˆ  íŠ¸ë Œë“œ/í‚¤ì›Œë“œ" name="s4_keyword" value={sessionData.s4_keyword} onChange={handleInput} placeholder="ë…¼ë¬¸ë“¤ì—ì„œ ê³µí†µì ìœ¼ë¡œ ë‹¤ë£¨ëŠ” í•µì‹¬ ë¬¸ì œì˜ì‹" />
            <TextAreaField label="í•µì‹¬ ìˆ«ìì™€ íŒ©íŠ¸ (Core Evidence)" name="s4_fact" value={sessionData.s4_fact} onChange={handleInput} height="h-64" bgColor="bg-indigo-50/30" textColor="text-indigo-900" placeholder="ë³´ê³ ì„œì˜ ê·¼ê±°ê°€ ë  í†µê³„ ìˆ˜ì¹˜, ì‹¤í—˜ ê²°ê³¼, í‘œì˜ ë°ì´í„° ë“±ì„ ì¶œì²˜ì™€ í•¨ê»˜ ê¸°ë¡í•˜ì„¸ìš”." />
          </div>
        );

        case 13: return (
          <div className="space-y-12 fade-in">
            <h2 className="text-4xl font-black text-indigo-600 tracking-tighter">ğŸ“Š íƒêµ¬ ë°©ë²•ë¡  ë§ˆìŠ¤í„° ê°€ì´ë“œ</h2>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
              <div className="bg-indigo-50 p-10 rounded-[48px] border-2 border-indigo-100 shadow-sm relative overflow-hidden group">
                <div className="absolute top-0 right-0 p-6 opacity-10 group-hover:scale-110 transition-transform">
                  <i data-lucide="database" className="w-20 h-20"></i>
                </div>
                <h3 className="font-black text-indigo-900 text-2xl mb-4">â‘  ë°ì´í„° ì¬í•´ì„í˜•</h3>
                <p className="text-sm text-indigo-800 leading-relaxed font-bold">ê³µê³µë°ì´í„°ë‚˜ í†µê³„ ìˆ˜ì¹˜ë¥¼ ìƒˆë¡œìš´ ê°€ì„¤ë¡œ ì—°ê²°í•˜ì—¬ ì‹œê°í™”í•˜ê³  ë¶„ì„í•©ë‹ˆë‹¤.</p>
              </div>
              <div className="bg-emerald-50 p-10 rounded-[48px] border-2 border-emerald-100 shadow-sm relative overflow-hidden group">
                <div className="absolute top-0 right-0 p-6 opacity-10 group-hover:scale-110 transition-transform">
                  <i data-lucide="shuffle" className="w-20 h-20"></i>
                </div>
                <h3 className="font-black text-emerald-900 text-2xl mb-4">â‘¡ ì‚¬ë¡€ ë¹„êµí˜•</h3>
                <p className="text-sm text-emerald-800 leading-relaxed font-bold">ë™ì¼í•œ ë³€ì¸ì„ ê°€ì§„ ë‹¤ë¥¸ ì‚¬ë¡€ Aì™€ Bë¥¼ ëŒ€ì¡°í•˜ì—¬ ì°¨ì´ì˜ ì›ì¸ì„ íƒêµ¬í•©ë‹ˆë‹¤.</p>
              </div>
              <div className="bg-rose-50 p-10 rounded-[48px] border-2 border-rose-100 shadow-sm relative overflow-hidden group">
                <div className="absolute top-0 right-0 p-6 opacity-10 group-hover:scale-110 transition-transform">
                  <i data-lucide="test-tube" className="w-20 h-20"></i>
                </div>
                <h3 className="font-black text-rose-900 text-2xl mb-4">â‘¢ ê°€ì„¤ ì‹¤í—˜í˜•</h3>
                <p className="text-sm text-rose-800 leading-relaxed font-bold">íŠ¹ì • ë³€ì¸ì„ í†µì œí•œ ìƒíƒœì—ì„œ ì‹¤í—˜ì„ ìˆ˜í–‰í•˜ê³  ì˜ˆì¸¡ê°’ê³¼ ì‹¤ì œê°’ì„ ë¹„êµí•©ë‹ˆë‹¤.</p>
              </div>
              <div className="bg-amber-50 p-10 rounded-[48px] border-2 border-amber-100 shadow-sm relative overflow-hidden group">
                <div className="absolute top-0 right-0 p-6 opacity-10 group-hover:scale-110 transition-transform">
                  <i data-lucide="pen-tool" className="w-20 h-20"></i>
                </div>
                <h3 className="font-black text-amber-900 text-2xl mb-4">â‘£ ì´ë¡  ì ìš©í˜•</h3>
                <p className="text-sm text-amber-800 leading-relaxed font-bold">ì¶”ìƒì ì¸ ì „ê³µ ì´ë¡ ì„ ì‹¤ì œ ì‚¬íšŒ í˜„ìƒì´ë‚˜ ê¸°ì—… ì‚¬ë¡€ì— ëŒ€ì…í•˜ì—¬ ë¶„ì„í•©ë‹ˆë‹¤.</p>
              </div>
            </div>
            <div className="bg-slate-900 p-10 rounded-[48px] text-white shadow-2xl">
              <h3 className="font-black text-indigo-400 text-xl mb-4 tracking-tighter">ğŸ’¡ ì£¼ê·¼ì„¤ ë¬¸ì¥ ê³µì‹</h3>
              <p className="text-lg leading-relaxed font-bold italic">"[ìë£Œì¶œì²˜/ì—°ë„]ì— ì˜í•˜ë©´ [A] ì§€í‘œê°€ [N] ìˆ˜ì¹˜ë¡œ ë‚˜íƒ€ë‚¨. ì´ëŠ” [í•™ìŠµí•œ ì›ë¦¬]ì— ë¹„ì¶”ì–´ ë³¼ ë•Œ [í•´ì„/ë¶„ì„]ìœ¼ë¡œ íŒë‹¨í•  ìˆ˜ ìˆìŒ."</p>
            </div>
          </div>
        );

        case 5: return (
          <div className="fade-in space-y-10">
            <SectionHeader title="5~7ì°¨ì‹œ: ìˆ˜í–‰ ë° ë…¸ë ¥ ê¸°ë¡" subTitle="Action Log & Failure Record" btnText="ìˆ˜í–‰ ì½”ì¹­ ìš”ì²­" onBtnClick={handleAiConsult} />
            <TextAreaField label="ì§„ì§œ ë…¸ë ¥ ì¼ì§€ (Action Log)" name="s5_log" value={sessionData.s5_log} onChange={handleInput} height="h-48" placeholder="ë°©ë¬¸ ì‚¬ì´íŠ¸, ë°ì´í„° ê°€ê³µ ê³¼ì •, ì°¸ê³ í•œ ìˆ˜ì‹ ë“± êµ¬ì²´ì ì¸ í–‰ìœ„ë¥¼ ë‚ ì§œë³„ë¡œ ê¸°ë¡í•˜ì„¸ìš”." />
            <TextAreaField label="ì‹œí–‰ì°©ì˜¤ ë° ì‹¤íŒ¨ ê¸°ë¡ (Error Log)" name="s5_error" value={sessionData.s5_error} onChange={handleInput} height="h-32" bgColor="bg-rose-50/50" textColor="text-rose-900 italic" placeholder="ìë£Œê°€ ì—†ì–´ì„œ ì‹¤íŒ¨í–ˆê±°ë‚˜ ê°€ì„¤ì´ í‹€ë ¸ë˜ ì§€ì  ë“± ì‹¤íŒ¨ì˜ í”ì ì„ ì†”ì§íˆ ì ìœ¼ì„¸ìš”." />
            <TextAreaField label="ì¤‘ê°„ ì‚°ì¶œë¬¼ (Interim Result)" name="s5_result" value={sessionData.s5_result} onChange={handleInput} height="h-32" bgColor="bg-emerald-50/50" textColor="text-emerald-900" placeholder="ë„ì¶œëœ í‘œ, ê·¸ë˜í”„ì˜ ìˆ˜ì¹˜ë‚˜ í•µì‹¬ ì¤‘ê°„ ê²°ë¡ ì„ ì ìœ¼ì„¸ìš”." />
          </div>
        );

        case 12: return (
          <div className="space-y-12 fade-in text-center py-16">
            <div className="bg-rose-50 p-16 rounded-[80px] border-4 border-rose-100 max-w-3xl mx-auto shadow-2xl">
              <i data-lucide="alert-triangle" className="w-20 h-20 text-rose-500 mx-auto mb-8"></i>
              <h2 className="text-4xl font-black text-rose-900 tracking-tighter mb-6">AIëŠ” ë°œí’ˆì„ ëŒ€ì‹  íŒ”ì§€ ì•ŠìŠµë‹ˆë‹¤.</h2>
              <p className="text-xl text-rose-800 leading-relaxed font-bold mb-10 italic">
                ì‚¬ì •ê´€ì€ ë§¤ë„ëŸ¬ìš´ AI ë¬¸ì¥ë³´ë‹¤<br />ì—¬ëŸ¬ë¶„ì˜ ê±°ì¹ ê³  íˆ¬ë°•í•œ 'ì‹œí–‰ì°©ì˜¤ ê¸°ë¡'ì„ ë” ì‹ ë¢°í•©ë‹ˆë‹¤.
              </p>
              <div className="text-left bg-white/60 p-10 rounded-[40px] space-y-6 font-bold text-base text-rose-950 border border-rose-200 shadow-inner">
                <p className="flex gap-4"><i data-lucide="check-circle" className="w-6 h-6 shrink-0 text-rose-600"></i> AIëŠ” ë…¼ë¦¬ êµ¬ì¡°ë¥¼ ì¡ëŠ” ë³´ì¡° ë„êµ¬ë¡œë§Œ í™œìš©í•˜ì„¸ìš”.</p>
                <p className="flex gap-4"><i data-lucide="check-circle" className="w-6 h-6 shrink-0 text-rose-600"></i> ë°˜ë“œì‹œ ì§ì ‘ ì°¾ì€ 'ìˆ«ì'ì™€ 'ë°ì´í„°'ë¥¼ í”„ë¡¬í”„íŠ¸ì— ë„£ìœ¼ì„¸ìš”.</p>
                <p className="flex gap-4"><i data-lucide="check-circle" className="w-6 h-6 shrink-0 text-rose-600"></i> ë§¤ë„ëŸ½ê²Œ ìˆ˜ì •í•´ë‹¬ë¼ëŠ” ìš”ì²­ë³´ë‹¤, ë…¼ë¦¬ì˜ í—ˆì ì„ ì°¾ì•„ë‹¬ë¼ê³  í•˜ì„¸ìš”.</p>
              </div>
            </div>
          </div>
        );

        case 8: return (
          <div className="fade-in space-y-10">
            <SectionHeader title="8~10ì°¨ì‹œ: ì„±ì°° ë° ìµœì¢… ìš”ì•½" subTitle="Synthesis & Final Portfolio" btnText="AI ì„¸íŠ¹ ì´ˆì•ˆ ì™„ì„±" onBtnClick={handleAiConsult} />
            <TextAreaField label="ìµœì¢… ì£¼ì¥ (Final Claim)" name="s8_claim" value={sessionData.s8_claim} onChange={handleInput} height="h-32" placeholder="íƒêµ¬ ê²°ê³¼ë¥¼ í•œ ë¬¸ì¥ìœ¼ë¡œ ì •ì˜í•œë‹¤ë©´?" />
            <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
              <TextAreaField label="ì„±ì¥ ë° ë°°ìš´ ì " name="s8_growth" value={sessionData.s8_growth} onChange={handleInput} height="h-40" placeholder="ê°œë…/ê¸°ìˆ /íƒœë„ ì¸¡ë©´ì—ì„œì˜ ë³€í™”" />
              <TextAreaField label="í›„ì† íƒêµ¬ ì œì–¸" name="s8_next" value={sessionData.s8_next} onChange={handleInput} height="h-40" placeholder="í•œê³„ì ê³¼ ë‹¤ìŒ ì—°êµ¬ ë°©í–¥" />
            </div>
            <div className="p-12 bg-slate-900 text-white rounded-[64px] shadow-2xl relative overflow-hidden">
              <div className="absolute top-0 right-0 p-10 opacity-10">
                <i data-lucide="graduation-cap" className="w-40 h-40 text-indigo-400"></i>
              </div>
              <Label><span className="text-indigo-400">ğŸ“ íƒêµ¬ ë³´ê³ ì„œ ì‘ì„± (FINAL SUMMARY)</span></Label>
              <textarea
                name="s8_summary"
                value={sessionData.s8_summary}
                onChange={handleInput}
                className="w-full h-72 bg-transparent border-none outline-none text-xl font-black leading-relaxed mt-6 resize-none scrollbar-hide relative z-10"
                placeholder="[ë™ê¸°-ê³¼ì •-ì„±ì¥-í›„ì†] êµ¬ì¡°ë¡œ 10ì°¨ì‹œ ì—¬ì •ì„ 500ì ì´ë‚´ë¡œ ì™„ê²°í•˜ì„¸ìš”."
              />
            </div>
          </div>
        );

        default:
          return <div className="p-10 text-center font-bold text-slate-400">ì„ íƒëœ íƒ­ì˜ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.</div>;
      }
    };

    /****************************************************************
     * 5) PrintView
     ****************************************************************/
    const PrintView = ({ studentInfo, sessionData, issueDate }) => (
      <div className="print-only print-root">
        <section className="print-page">
          <div className="avoid-break">
            <div className="print-label">Research Workbook</div>
            <h1 className="print-title">ì‹¬í™” íƒêµ¬ ê³¼ì • í†µí•© ì›Œí¬ë¶</h1>
            <div className="print-subtitle">Comprehensive Research Workbook</div>
          </div>

          <div style={{ height: "10mm" }} />

          <div className="print-card avoid-break" style={{ border: "1px solid #e5e7eb", borderRadius: "10mm", padding: "8mm" }}>
            <div className="print-label">Student</div>
            <div className="print-body" style={{ marginTop: "2mm" }}>
              <div><b>í•™êµ</b>: {studentInfo.school || "ë¯¸ì…ë ¥"}</div>
              <div><b>í•™ë²ˆ/ë°˜</b>: {studentInfo.gradeClass || "ë¯¸ì…ë ¥"}</div>
              <div><b>ì´ë¦„</b>: {studentInfo.name || "ë¯¸ì…ë ¥"}</div>
              <div><b>í¬ë§ ì „ê³µ</b>: {studentInfo.major || "ë¯¸ì…ë ¥"}</div>
              <div><b>ë°œê¸‰ì¼</b>: {issueDate}</div>
            </div>
          </div>
        </section>

        <section className="print-page">
          <h2 className="print-h2">01. íƒêµ¬ ì„¤ê³„ ë° ë°°ê²½</h2>

          <div className="print-block avoid-break" style={{ border: "1px solid #e5e7eb", borderRadius: "8mm", padding: "7mm", marginBottom: "6mm" }}>
            <div className="print-label">Topic</div>
            <div className="print-body" style={{ marginTop: "2mm", fontWeight: 800 }}>
              {sessionData.s1_topic || "ì…ë ¥ëœ íƒêµ¬ ì£¼ì œê°€ ì—†ìŠµë‹ˆë‹¤."}
            </div>
          </div>

          <div className="print-block avoid-break" style={{ border: "1px solid #e5e7eb", borderRadius: "8mm", padding: "7mm", marginBottom: "6mm" }}>
            <div className="print-label">Core Question</div>
            <div className="print-body" style={{ marginTop: "2mm" }}>
              {sessionData.s1_question || "ì…ë ¥ëœ íƒêµ¬ ì§ˆë¬¸ì´ ì—†ìŠµë‹ˆë‹¤."}
            </div>
          </div>

          <div className="print-block avoid-break" style={{ border: "1px solid #e5e7eb", borderRadius: "8mm", padding: "7mm" }}>
            <div className="print-label">Motivation & Connection</div>
            <div className="print-small" style={{ marginTop: "2mm", whiteSpace: "pre-wrap" }}>
              {sessionData.s1_motive || ""}
              {"\n\n"}
              {sessionData.s1_connection || ""}
            </div>
          </div>
        </section>

        <section className="print-page">
          <h2 className="print-h2">02. ë°ì´í„° ë¶„ì„ ë° ìˆ˜í–‰ ê³¼ì •</h2>

          <div className="print-block avoid-break" style={{ border: "1px solid #e5e7eb", borderRadius: "8mm", padding: "7mm", marginBottom: "6mm" }}>
            <div className="print-label">Core Evidence</div>
            <div className="print-small" style={{ marginTop: "2mm", whiteSpace: "pre-wrap" }}>
              {sessionData.s4_fact || ""}
            </div>
          </div>

          <div className="print-block avoid-break" style={{ border: "1px solid #e5e7eb", borderRadius: "8mm", padding: "7mm", marginBottom: "6mm" }}>
            <div className="print-label">Action Log</div>
            <div className="print-small" style={{ marginTop: "2mm", whiteSpace: "pre-wrap" }}>
              {sessionData.s5_log || ""}
            </div>
          </div>

          <div className="print-block avoid-break" style={{ border: "1px solid #e5e7eb", borderRadius: "8mm", padding: "7mm" }}>
            <div className="print-label">Error / Failure</div>
            <div className="print-small" style={{ marginTop: "2mm", whiteSpace: "pre-wrap" }}>
              {sessionData.s5_error || ""}
            </div>
          </div>
        </section>

        <section className="print-page">
          <h2 className="print-h2">03. ìµœì¢… ì„±ì°° ë° ìš”ì•½</h2>

          <div className="print-block avoid-break" style={{ border: "1px solid #e5e7eb", borderRadius: "8mm", padding: "7mm", marginBottom: "6mm" }}>
            <div className="print-label">Final Claim</div>
            <div className="print-body" style={{ marginTop: "2mm", whiteSpace: "pre-wrap", fontWeight: 800 }}>
              {sessionData.s8_claim || ""}
            </div>
          </div>

          <div className="print-block avoid-break" style={{ border: "1px solid #e5e7eb", borderRadius: "8mm", padding: "7mm", marginBottom: "6mm" }}>
            <div className="print-label">Growth & Next</div>
            <div className="print-small" style={{ marginTop: "2mm", whiteSpace: "pre-wrap" }}>
              {sessionData.s8_growth || ""}
              {"\n\n"}
              {sessionData.s8_next || ""}
            </div>
          </div>

          <div className="print-block avoid-break" style={{ border: "1px solid #111827", borderRadius: "8mm", padding: "7mm" }}>
            <div className="print-label">íƒêµ¬ ë³´ê³ ì„œ ì‘ì„±</div>
            <div className="print-body" style={{ marginTop: "2mm", whiteSpace: "pre-wrap" }}>
              {sessionData.s8_summary || "íƒêµ¬ ë³´ê³ ì„œê°€ ìƒì„±ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤."}
            </div>
          </div>
        </section>
      </div>
    );

    /****************************************************************
     * 6) ë©”ì¸ App
     ****************************************************************/
    const App = () => {
      const [personalCode, setPersonalCode] = useState("");
      const [activeUserKey, setActiveUserKey] = useState("");
      const [isLoggedIn, setIsLoggedIn] = useState(false);
      const [serverStatus, setServerStatus] = useState("");
      const [studentInfo, setStudentInfo] = useState({ ...EMPTY_STUDENT });
      const [sessionData, setSessionData] = useState({ ...EMPTY_SESSION });
      const [activeTab, setActiveTab] = useState(0);
      const [aiLoading, setAiLoading] = useState(false);
      const [aiResult, setAiResult] = useState("");
      const [issueDate] = useState(() => new Date().toLocaleDateString());

      const refreshIcons = () => { if (window.lucide) window.lucide.createIcons(); };

      useEffect(() => {
        const timer = setTimeout(() => {
          const loader = document.getElementById("loading-screen");
          if (loader) {
            loader.style.opacity = "0";
            setTimeout(() => { loader.style.display = "none"; }, 500);
          }
          refreshIcons();
        }, 800);
        return () => clearTimeout(timer);
      }, []);

      useEffect(() => { setTimeout(refreshIcons, 100); }, [activeTab, aiResult, isLoggedIn]);

      // ë¡œê·¸ì¸(JSONP)
      const handleLogin = async () => {
        const code = personalCode.trim();
        if (!code) return setServerStatus("ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
        setServerStatus("ë°ì´í„° í™•ì¸ ì¤‘...");

        try {
          const cb = `cb_${Date.now()}`;

          const res = await new Promise((resolve, reject) => {
            window[cb] = (data) => {
              resolve(data);
              try { delete window[cb]; } catch(_) {}
            };

            const script = document.createElement("script");
            script.src = `${CONFIG.SCRIPT_URL}?userKey=${encodeURIComponent(code)}&callback=${cb}&nocache=${Date.now()}`;
            script.onload = () => { script.remove(); };
            script.onerror = () => { script.remove(); reject(new Error("ì„œë²„ ì—°ê²° ì‹¤íŒ¨")); };
            document.body.appendChild(script);
          });

          if (res.ok) {
            if (res.exists && res.data) {
              setStudentInfo({
                school: res.data.school || "",
                gradeClass: res.data.gradeClass || "",
                name: res.data.name || "",
                major: res.data.major || ""
              });

              const nextSession = { ...EMPTY_SESSION };
              Object.keys(EMPTY_SESSION).forEach((k) => {
                if (res.data && Object.prototype.hasOwnProperty.call(res.data, k)) {
                  nextSession[k] = res.data[k] ?? "";
                }
              });
              setSessionData(nextSession);

              setServerStatus("âœ… ë¡œë“œ ì™„ë£Œ");
            } else {
              setServerStatus("ğŸ†• ì‹ ê·œ ê³„ì •");
              setStudentInfo({ ...EMPTY_STUDENT });
              setSessionData({ ...EMPTY_SESSION });
            }
            setActiveUserKey(code);
            setIsLoggedIn(true);
          } else {
            setServerStatus("âš ï¸ ì˜¤ë¥˜: " + (res.error || ""));
          }
        } catch (e) {
          setServerStatus("âš ï¸ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜");
          console.error(e);
        }
      };

      // ì €ì¥ - Upsert
      const handleSaveAll = async () => {
        if (!isLoggedIn || !activeUserKey) return alert("ë¡œê·¸ì¸ í•„ìš”");
        setServerStatus("ì €ì¥ ì¤‘...");

        try {
          const payload = { userKey: activeUserKey, ...sessionData, ...studentInfo };

          const res = await fetch(CONFIG.SCRIPT_URL, {
            method: "POST",
            headers: { "Content-Type": "text/plain; charset=utf-8" },
            body: JSON.stringify(payload)
          });

          const text = await res.text();
          let json;
          try { json = JSON.parse(text); }
          catch (_) {
            throw new Error("ì„œë²„ ì‘ë‹µì´ JSONì´ ì•„ë‹™ë‹ˆë‹¤.\n\nì‘ë‹µ ì¼ë¶€:\n" + text.slice(0, 300));
          }

          if (json.ok) {
            const act = json.action === "updated" ? "ìˆ˜ì •" : "ì‹ ê·œì €ì¥";
            setServerStatus(`âœ… ${act} ì™„ë£Œ (${json.timestamp || ""})`);
            setTimeout(() => setServerStatus(""), 3000);
          } else {
            throw new Error(json.error || "ì €ì¥ ì‹¤íŒ¨");
          }

        } catch (e) {
          setServerStatus("âš ï¸ ì €ì¥ ì‹¤íŒ¨");
          alert(e.message);
        }
      };

      const handleAskAI = async ({ promptText, systemText }) => {
        if (!promptText || !isLoggedIn) return alert("ì…ë ¥ í™•ì¸ ë° ë¡œê·¸ì¸ í•„ìš”");
        setAiLoading(true); setAiResult("");

        try {
          const res = await fetch(CONFIG.SCRIPT_URL, {
            method: "POST",
            headers: { "Content-Type": "text/plain; charset=utf-8" },
            body: JSON.stringify({
              action: "askGemini",
              prompt: promptText,
              system: systemText,
              userKey: activeUserKey,
              model: CONFIG.GEMINI_MODEL
            })
          });

          const text = await res.text();
          let json;
          try { json = JSON.parse(text); }
          catch (_) { throw new Error("AI ì‘ë‹µì´ JSONì´ ì•„ë‹™ë‹ˆë‹¤:\n" + text.slice(0, 300)); }

          if (json.ok) setAiResult(json.answer || "ì‘ë‹µ ì—†ìŒ");
          else throw new Error(json.error);

        } catch(e) {
          setAiResult("ì˜¤ë¥˜: " + e.message);
        } finally {
          setAiLoading(false);
        }
      };

      // handleAiConsult
      const handleAiConsult = () => {
        const system = `
ì—­í• : ê³ ë“±í•™êµ í•™ìƒìš© íƒêµ¬ ì½”ì¹˜.
ëª©í‘œ: í•™ìƒ ì…ë ¥ì„ ê°œì¡°ì‹ìœ¼ë¡œ ëª…í™•í•˜ê³  ì´í•´í•˜ê¸° ì‰½ê²Œ ì •ë¦¬/ê°œì„ .

[ì¶œë ¥ í˜•ì‹ ê³ ì •]
- ë°˜ë“œì‹œ ë²ˆí˜¸ ê°œì¡°ì‹ (1) (2) (3) ...
- ê° í•­ëª© 1~2ë¬¸ì¥, í•œ í•­ëª© 80ì ë‚´ì™¸ ê¶Œì¥.
- ë¶ˆí•„ìš”í•œ ìˆ˜ì‹ì–´ ì‚­ì œ, í•µì‹¬ì–´ ì•ë°°ì¹˜.
- ê²°ê³¼ë¬¼ì€ í•™ìƒì´ ê·¸ëŒ€ë¡œ ë¶™ì—¬ë„£ì–´ë„ ìì—°ìŠ¤ëŸ½ê²Œ.
- ë‚´ìš©ì´ ë¹„ì–´ìˆê±°ë‚˜ ì•½í•˜ë©´ ë§ˆì§€ë§‰ì— "ì¶”ê°€ë¡œ ì ì„ ê²ƒ(ì§ˆë¬¸ 3ê°œ)" í¬í•¨.
- ê³¼ì¥/í—ˆìœ„ ê¸ˆì§€. ì…ë ¥ì—ì„œ ë²—ì–´ë‚œ ì‚¬ì‹¤ ìƒì„± ê¸ˆì§€.
        `;

        let prompt = "";

        switch (activeTab) {
          case 1:
            prompt = `
[ì „ê³µ] ${studentInfo.major}
[íƒêµ¬ ì£¼ì œ] ${sessionData.s1_topic}
[ë™ê¸°] ${sessionData.s1_motive}
[í•µì‹¬ ì§ˆë¬¸] ${sessionData.s1_question}
[êµê³¼/ì „ê³µ ì—°ê²°] ${sessionData.s1_connection}

(1) ì£¼ì œ(í•œ ì¤„ ì •ì˜)
(2) ë™ê¸°(ê²½í—˜/ë¬¸ì œì˜ì‹ ì¤‘ì‹¬ 2ì¤„)
(3) ì—°êµ¬ì§ˆë¬¸(RQ) 1ê°œ + í•˜ìœ„ì§ˆë¬¸ 2ê°œ
(4) êµê³¼ ê°œë…/ì „ê³µ ê°œë… ì—°ê²° 3ê°œ í‚¤ì›Œë“œ
(5) íƒêµ¬ ë²”ìœ„/ëŒ€ìƒ/ë³€ì¸(ìˆìœ¼ë©´) 3ì¤„
- ê° í•­ëª©ì€ "[í•µì‹¬ì–´] ë‚´ìš©" í˜•íƒœë¡œ ì‹œì‘
- ë¬¸ì¥ ëì€ "~í•©ë‹ˆë‹¤"ë¡œ í†µì¼
            `;
            break;

          case 2:
            prompt = `
[ë„ì„œ] ${sessionData.s2_book}
[ì €ì] ${sessionData.s2_author}
[ë‚œì´ë„] ${sessionData.s2_level}
[ì§‘ì¤‘ ì±•í„°/ë¶€ë¶„] ${sessionData.s2_part}
[ìµœì¢… ì‚°ì¶œë¬¼] ${sessionData.s2_goal}

(1) ì´ ì±…ì„ ì„ íƒí•œ ì´ìœ (ì „ê³µ/ì£¼ì œ ì—°ê²°)
(2) ì½ì„ ë²”ìœ„(ì±•í„°/íŒŒíŠ¸)ì™€ ì´ìœ 
(3) ì±…ì—ì„œ ë½‘ì„ í•µì‹¬ ê°œë… 5ê°œ(í‚¤ì›Œë“œ+í•œ ì¤„ ì„¤ëª…)
(4) ì‚°ì¶œë¬¼(ë³´ê³ ì„œ/ë¦¬í¬íŠ¸ ë“±) ëª©ì°¨ 5ê°œ
(5) ë‹¤ìŒ ì°¨ì‹œ í•  ì¼ ì²´í¬ë¦¬ìŠ¤íŠ¸ 6ê°œ
- ë¬¸ì¥ ëì€ "~í•©ë‹ˆë‹¤"ë¡œ í†µì¼
            `;
            break;

          case 3:
            prompt = `
[ë„ì„œë¡œ ì–»ì€ ì§€ì‹] ${sessionData.s3_depth}
[ì¶”ê°€ ìë£Œ] ${sessionData.s3_trace}

(1) í•µì‹¬ ê°œë… 5ê°œ(í•œ ì¤„ ì •ì˜)
(2) ê°œë… ê°„ ì—°ê²° 3ê°œ(ì›ì¸-ê²°ê³¼/ë¹„êµ/êµ¬ì¡°)
(3) êµê³¼ì„œ ê°œë…ê³¼ ì—°ê²° 3ê°œ(êµê³¼ â†’ ë„ì„œ)
(4) ì¸ìš©/ì¶”ì  ìë£Œ ëª©ë¡(ìë£Œëª…-ì™œ í•„ìš”í•œì§€)
(5) ì¶”ê°€ë¡œ ì ì„ ê²ƒ(ì§ˆë¬¸ 3ê°œ)
            `;
            break;

          case 4:
            prompt = `
[íŠ¸ë Œë“œ/í‚¤ì›Œë“œ] ${sessionData.s4_keyword}
[í•µì‹¬ ìˆ«ì/íŒ©íŠ¸] ${sessionData.s4_fact}

(1) í•µì‹¬ ì£¼ì¥ 1ë¬¸ì¥
(2) ê·¼ê±° ë°ì´í„° 3ê°œ: [ìˆ˜ì¹˜/ê²°ê³¼]-[ì¶œì²˜]-[ì˜ë¯¸]
(3) í•´ì„ 3ì¤„
(4) í•œê³„/ì£¼ì˜ì  2ê°œ
(5) ë³´ê³ ì„œì— ë°”ë¡œ ë„£ì„ ë¬¸ì¥ 3ê°œ
- ë¬¸ì¥ ëì€ "~í•©ë‹ˆë‹¤"
            `;
            break;

          case 5:
            prompt = `
[ìˆ˜í–‰ ê¸°ë¡] ${sessionData.s5_log}
[ì‹¤íŒ¨ ê¸°ë¡] ${sessionData.s5_error}
[ì¤‘ê°„ ì‚°ì¶œë¬¼] ${sessionData.s5_result}

(1) íƒ€ì„ë¼ì¸ 6ì¤„(ë‚ ì§œ/í–‰ë™/ë„êµ¬)
(2) ì–´ë ¤ì›€ 3ê°œ: ë¬¸ì œ-ì›ì¸-ëŒ€ì•ˆ
(3) ì¤‘ê°„ ê²°ê³¼ 3ê°œ: ê²°ê³¼-ì˜ë¯¸-ë‹¤ìŒ í–‰ë™
(4) ì—­ëŸ‰ í‚¤ì›Œë“œ 5ê°œ + ê·¼ê±° 1ì¤„ì”©
(5) ê°œì„ í•  ì  3ê°œ
- ë¬¸ì¥ ëì€ "~í•©ë‹ˆë‹¤"
            `;
            break;

          case 8:
            prompt = `
[ìµœì¢… ì£¼ì¥] ${sessionData.s8_claim}
[ì„±ì¥] ${sessionData.s8_growth}
[í›„ì† íƒêµ¬] ${sessionData.s8_next}
[ì„¸íŠ¹ ì´ˆì•ˆ] ${sessionData.s8_summary}

(1) íƒêµ¬ í•œ ì¤„ ìš”ì•½(ì£¼ì œ-ë°©ë²•-ê²°ë¡ )
(2) ê³¼ì • 5ì¤„
(3) ê·¼ê±°/ë°ì´í„° í™œìš© 3ì¤„
(4) ì„±ì¥ 3ì¤„
(5) í›„ì† íƒêµ¬ 2ì¤„
(6) ìµœì¢… ì„¸íŠ¹ ë¬¸ì¥(500ì ì´ë‚´)
- ê³¼ì¥ ì—†ì´, ëª…í™•í•˜ê²Œ "~í•©ë‹ˆë‹¤"
            `;
            break;

          default:
            prompt = `
(1) í•µì‹¬ ìš”ì•½ 3ì¤„
(2) ì¢‹ì€ ì  2ì¤„
(3) ë³´ì™„í•  ì  3ì¤„
(4) ë‹¤ìŒ í–‰ë™ ì²´í¬ë¦¬ìŠ¤íŠ¸ 5ê°œ
- ë¬¸ì¥ ëì€ "~í•©ë‹ˆë‹¤"
            `;
        }

        handleAskAI({ promptText: prompt.trim(), systemText: system.trim() });
      };

      const handleLogout = () => {
        setIsLoggedIn(false);
        setActiveUserKey("");
        setPersonalCode("");
        setStudentInfo({ ...EMPTY_STUDENT });
        setSessionData({ ...EMPTY_SESSION });
        setAiResult("");
        setServerStatus("");
      };

      const handleInput = (e) => setSessionData(prev => ({ ...prev, [e.target.name]: e.target.value }));
      const handleStudent = (e) => setStudentInfo(prev => ({ ...prev, [e.target.name]: e.target.value }));

      return (
        <div className="flex flex-col min-h-screen relative">
          {!isLoggedIn && (
            <LoginScreen
              personalCode={personalCode}
              setPersonalCode={setPersonalCode}
              handleLogin={handleLogin}
              serverStatus={serverStatus}
            />
          )}

          <div className="no-print flex-grow flex flex-col">
            <Header
              serverStatus={serverStatus}
              handleSaveAll={handleSaveAll}
              handleLogout={handleLogout}
            />
            <TabNavigation
              activeTab={activeTab}
              setActiveTab={setActiveTab}
              setAiResult={setAiResult}
            />

            <main className="flex-grow p-4 md:p-10 bg-slate-50">
              <div className="max-w-6xl mx-auto pb-32">
                <AiResultBox
                  loading={aiLoading}
                  result={aiResult}
                  onClose={() => setAiResult("")}
                />
                <div className="bg-white rounded-[56px] border border-slate-200 shadow-sm p-8 md:p-16 min-h-[700px] flex flex-col">
                  <TabContent
                    activeTab={activeTab}
                    studentInfo={studentInfo}
                    sessionData={sessionData}
                    handleStudent={handleStudent}
                    handleInput={handleInput}
                    handleAiConsult={handleAiConsult}
                    aiLoading={aiLoading}
                  />
                </div>
              </div>
            </main>
          </div>

          <PrintView studentInfo={studentInfo} sessionData={sessionData} issueDate={issueDate} />
        </div>
      );
    };

    ReactDOM.createRoot(document.getElementById("root")).render(<App />);
  </script>
</body>
</html>
